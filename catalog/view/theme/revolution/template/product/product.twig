{{ header }} 
<div class="container">
<div itemscope itemtype="http://schema.org/BreadcrumbList" style="display:none;">
{% set position = 1 %} {% for breadcrumb in breadcrumbs %} 
<div itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
<link itemprop="item" href="{{ breadcrumb['href'] }}">
<meta itemprop="name" content="{{ breadcrumb['text'] }}" />
<meta itemprop="position" content="{{ position }}" />
</div>
{% set position = position + 1 %} {% endfor %} 
</div>
<ul class="breadcrumb"><li class="br_ellipses" style="display: none;">...</li>
{% for i,breadcrumb in breadcrumbs %} 
{% if (i+1<breadcrumbs|length) %}<li><a href="{{ breadcrumb['href'] }}">{{ breadcrumb['text'] }}</a></li>{% else %}{% endif %} 
{% endfor %} 
<li><h1 class="inbreadcrumb">{{ heading_title }}</h1></li>
</ul>
  <div class="row">{{ column_left }} 
    {% if (column_left and column_right) %} 
    {% set class = 'col-sm-6' %} {% set columns_dd = constant('true') %}
     {% elseif (column_left or column_right or (products and recpr_rightc)) %} 
    {% set class = 'col-sm-9' %} {% set columns_dd = constant('true') %}
     {% else %} 
    {% set class = 'col-sm-12' %} {% set columns_dd = constant('false') %}
    {% endif %}  
    <div id="content" class="{{ class }}">{{ content_top }} 
      <div class="row" itemscope itemtype="http://schema.org/Product">
		<meta itemprop="name" content="{{ heading_title }}" />
		<meta itemprop="category" content="{{ breadcrumbsbreadcrumbs-2['text'] }}" />
        {% if (column_left or column_right) %} 
        {% set class2 = 'col-sm-9 col-md-6' %} 
        {% else %} 
        {% set class2 = 'col-sm-12 col-md-5' %} 
        {% endif %} 
        <div class="{{ class2 }} product_informationss">
			{% if (thumb or images) %} 
				<div class="thumbnails">
				{% if (thumb) %} 
					<div class="main_img_box">
					{% if (zoom) %} 
						<div id="imageWrap" class="image">
							<a class="main-image" id='zoom1' href="{{ popup }}" title="{{ heading_title }}"><img id="mainImage" class="img-responsive" src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" itemprop="image" />
								{% if (stikers_status) %} 
									<div class="stiker_panel">
										{% if ((quantity > 0 and price_number != 0) or zakaz) %} 
											{% if (stiker_spec) %} 
												{% if (special) %} 
													<span class="stiker stiker_spec">{{ '- ' ~ ((price_number-special_number)/price_number*100)|round ~ '%' }}</span>
												{% endif %} 
											{% endif %} 
										{% endif %} 
										{% if (stiker_best) %} 
											<span class="stiker stiker_best">{{ text_catalog_stiker_best }}</span>
										{% endif %} 
										{% if (stiker_last) %} 
											<span class="stiker stiker_last">{{ text_catalog_stiker_last }}</span>
										{% endif %} 
										{% if (stiker_sklad_status) %} 
											<span class="stiker stiker_netu">{{ stiker_sklad_status }}</span>
										{% elseif (stiker_stock) %} 
											{% if (price_number == 0 and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu_2 }}</span>
											{% elseif (quantity < 1 and price_number > 0 and not zakaz) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and not zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and zakaz and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% endif %} 
										{% endif %} 
										{% if (stiker_upc) %} 
											<span class="stiker stiker_user">{{ stiker_upc }}</span>
										{% endif %} 
										{% if (stiker_ean) %} 
											<span class="stiker stiker_user">{{ stiker_ean }}</span>
										{% endif %} 
										{% if (stiker_jan) %} 
											<span class="stiker stiker_user">{{ stiker_jan }}</span>
										{% endif %} 
										{% if (stiker_isbn) %} 
											<span class="stiker stiker_user">{{ stiker_isbn }}</span>
										{% endif %} 
										{% if (stiker_mpn) %} 
											<span class="stiker stiker_user">{{ stiker_mpn }}</span>
										{% endif %} 
									</div>
								{% endif %} 
							</a>
						</div>
					{% else %} 
						<div class="image">
							<a class="main-image" href="{{ popup }}" title="{{ heading_title }}" data-number="0"><img class="img-responsive" src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" itemprop="image" />
								{% if (stikers_status) %} 
									<div class="stiker_panel">
										{% if ((quantity > 0 and price_number != 0) or zakaz) %} 
											{% if (stiker_spec) %} 
												{% if (special) %} 
													<span class="stiker stiker_spec">{{ '- ' ~ ((price_number-special_number)/price_number*100)|round ~ '%' }}</span>
												{% endif %} 
											{% endif %} 
										{% endif %} 
										{% if (stiker_best) %} 
											<span class="stiker stiker_best">{{ text_catalog_stiker_best }}</span>
										{% endif %} 
										{% if (stiker_last) %} 
											<span class="stiker stiker_last">{{ text_catalog_stiker_last }}</span>
										{% endif %} 
										{% if (stiker_sklad_status) %} 
											<span class="stiker stiker_netu">{{ stiker_sklad_status }}</span>
										{% elseif (stiker_stock) %} 
											{% if (price_number == 0 and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu_2 }}</span>
											{% elseif (quantity < 1 and price_number > 0 and not zakaz) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and not zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and zakaz and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% elseif (quantity < 1 and zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu }}</span>
											{% endif %} 
										{% endif %} 
										{% if (stiker_upc) %} 
											<span class="stiker stiker_user">{{ stiker_upc }}</span>
										{% endif %} 
										{% if (stiker_ean) %} 
											<span class="stiker stiker_user">{{ stiker_ean }}</span>
										{% endif %} 
										{% if (stiker_jan) %} 
											<span class="stiker stiker_user">{{ stiker_jan }}</span>
										{% endif %} 
										{% if (stiker_isbn) %} 
											<span class="stiker stiker_user">{{ stiker_isbn }}</span>
										{% endif %} 
										{% if (stiker_mpn) %} 
											<span class="stiker stiker_user">{{ stiker_mpn }}</span>
										{% endif %} 
									</div>
								{% endif %} 
							</a>
						</div>
					{% endif %} 
					</div>
				{% endif %} 
				{% if (images) %} 
					{% if (images_slider) %} 
						<div id="owl-images" class="owl-carousel owl-theme images-additional">
							<div class="item">
								<a href="{{ popup }}" id="{{ thumb }}" title="{{ heading_title }}"><img src="{{ thumb_small }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="0"/></a>
							</div>
							{% set number = 1 %}
							{% for image in images %} 
								<div class="item">
									{% if (image['video']) %} 
										<a class="mfp-iframe" href="{{ image['video'] }}" id="{{ image['thumb_big'] }}"><span></span>
											<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
										</a>
									{% else %} 
										<a href="{{ image['popup'] }}" id="{{ image['thumb_big'] }}" title="{{ heading_title }}">
											<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
										</a>
									{% endif %} 
								</div>
							{% set number = number + 1 %}
							{% endfor %} 
						</div>
					{% else %} 
						<div class="images-additional">
								<a class="thumbnail" href="{{ popup }}" id="{{ thumb }}" title="{{ heading_title }}">
									<img src="{{ thumb_small }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="0"/>
								</a>
							{% set number = 1 %}
							{% for image in images %} 
								{% if (not zoom) %} 
									{% if (image['video']) %} 
										<a class="thumbnail mfp-iframe" href="{{ image['video'] }}"><span></span>
											<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
										</a>
									{% else %} 
										<a class="thumbnail" href="{{ image['popup'] }}" id="{{ image['thumb_big'] }}" title="{{ heading_title }}">
											<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
										</a>
									{% endif %} 
								{% else %} 
									{% if (image['video']) %} 
										<a class="thumbnail mfp-iframe" href="{{ image['video'] }}"><span></span>
											<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
										</a>
									{% else %} 
										<a class="thumbnail" href="{{ image['popup'] }}" id="{{ image['thumb_big'] }}" title="{{ heading_title }}">
										<img src="{{ image['thumb'] }}" title="{{ heading_title }}" alt="{{ heading_title }}" data-number="{{ number }}"/>
									{% endif %} 
									</a>
								{% endif %} 
							{% set number = number + 1 %}
							{% endfor %} 
						</div>
					{% endif %} 
				{% endif %} 
				</div>
			{% endif %} 
        </div>
		{% if (column_left or column_right) %} 
        {% set class3 = 'col-sm-12 col-md-6' %} 
        {% else %} 
        {% set class3 = 'col-sm-12 col-md-7' %} 
        {% endif %} 
        <div class="{{ class3 }} product_informationss">
			{% if (revtheme_product_all['short_desc'] and short_description) %} 
				<div class="short_description">{{ short_description }}</div>
			{% endif %} 
			{% if (review_status) %} 
				{% if (reviews_number > 0) %} 
					<span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
					<meta itemprop="worstRating" content = "1">
					<meta itemprop="bestRating" content = "5">
					<meta itemprop="ratingValue" content = "{{ rating }}">
					<meta itemprop="reviewCount" content = "{{ reviews_number }}">
					</span>
				{% endif %} 
			{% endif %} 
            <ul class="list-unstyled">
			{% if (review_status) %} 
				<li class="rating dotted-line">
					<div class="dotted-line_left"><span class="dotted-line_title">{{ text_product_rating }}</span><div class="dotted-line_line"></div></div>
					<div class="dotted-line_right">
						{% set i = 1 %}{% for i in i..5 %} 
							{% if (rating < i) %} 
								<span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span>
							{% else %} 
								<span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span>
							{% endif %} 
						{% endfor %} 
						{% if (revtheme_product_all['pr_tabs']) %} 
							<sup><a class="adotted" onclick="$('a[href=\'#tab-review\']').trigger('click'); $('html, body').animate({ scrollTop: $('a[href=\'#tab-review\']').offset().top - 2}, 250); return false;">{{ reviews }}</a></sup>
						{% else %} 
							<sup><a class="adotted" onclick="$('html, body').animate({ scrollTop: $('.tab-review').offset().top - 70}, 250); return false;">{{ reviews }}</a></sup>
						{% endif %} 
					</div>
				</li>
			{% endif %} 
			{% if (manufacturer_status) %} 
				{% if (manufacturer) %} 
					<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_manufacturer }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right"><a href="{{ manufacturers }}"><span itemprop="brand">{{ manufacturer }}</span></a></div></li>
				{% endif %} 
			{% endif %} 
			{% if (model_status) %} 
				{% if (model != '') %} 
					<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_model }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right"><span class="pr_model" itemprop="model">{{ model }}</span></div></li>
				{% endif %} 
			{% endif %} 
			{% if (sku_status) %} 
				{% if (sku != '') %} 
					<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_product_artikul }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right"><span itemprop="sku">{{ sku }}</span></div></li>
				{% endif %} 
			{% endif %} 
			{% if (ostatok_status) %} 
				<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_product_dostupno }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right">{{ stock }}</div></li>
			{% else %} 
				<li class="hidden pr_quantity">{{ quantity }}</li>
			{% endif %} 
			{% if (weight_status) %} 
				{% if (weight > 0) %} 
					<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_product_ves }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right"><span class="pr_weight" data-weight="{{ weight_value }}" data-weight-unit="{{ weight_unit }}">{{ weight }}</span> {{ weight_format }}</div></li>
				{% endif %} 
			{% endif %} 
			{% if (razmers) %} 
				{% if (length > 0 or width > 0 or height > 0) %} 
					<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ text_product_razmers }}</span><div class="dotted-line_line"></div></div><div class="dotted-line_right">{% if (length > 0) %}{{ length }}{% else %} - {% endif %} x {% if (width > 0) %}{{ width }}{% else %} - {% endif %} x {% if (height > 0) %}{{ height }}{% else %} - {% endif %} {{ length_format }}</div></li>
				{% endif %} 
			{% endif %} 
			{% if (not atributs) %} 
				{% if (revtheme_product_all_attribute_group) %}	  
					{% for attribute_group in attribute_groups %} 
						{% if (attribute_group['attribute_group_id'] in revtheme_product_all_attribute_group) %} 
							{% if (revtheme_product_all['atributs_all_limit'] is defined and revtheme_product_all['atributs_all_limit']) %}
								{{ attribute_group['attribute']|slice(0, revtheme_product_all['atributs_all_limit']) }}
							{% endif %} 
							{% for attribute in attribute_group['attribute'] %} 
								{% if (attribute['text'] != '') %}	  
									<li class="dotted-line"><div class="dotted-line_left"><span class="dotted-line_title">{{ attribute['name'] }}:</span><div class="dotted-line_line"></div></div><div class="dotted-line_right">{{ attribute['text'] }}</div></li>
								{% endif %} 
							{% endfor %} 
						{% endif %} 
					{% endfor %} 
					{% if (atributs_ssilka_all and attribute_groups) %} 
						<li class="adotted_block">
							{% if (revtheme_product_all['pr_tabs']) %} 
								<a class="adotted" onclick="$('a[href=\'#tab-specification\']').trigger('click'); $('html, body').animate({ scrollTop: $('a[href=\'#tab-specification\']').offset().top - 2}, 250); return false;">{{ text_product_all_attribs }}</a>
							{% else %} 
								<a class="adotted" onclick="$('html, body').animate({ scrollTop: $('.tab-specification').offset().top - 70}, 250); return false;">{{ text_product_all_attribs }}</a>
							{% endif %} 
						</li>
					{% endif %} 
				{% endif %} 
			{% endif %} 
			
			{% if (atributs) %} 
				{% for attribute_group in attribute_groups %} 
						{% for attribute in attribute_group['attribute'] %} 
							{% if (attribute['text'] != '') %}	  
								<li class="dotted-line" itemprop="additionalProperty" itemscope itemtype="http://schema.org/PropertyValue"><div class="dotted-line_left"><span class="dotted-line_title" itemprop="name">{{ attribute['name'] }}:</span><div class="dotted-line_line"></div></div><div class="dotted-line_right" itemprop="value">{{ attribute['text'] }}</div></li>
							{% endif %} 
						{% endfor %} 
				{% endfor %} 
			{% endif %} 
            </ul>
			{% if (zakaz_price_null or price_number > 0) %} 
		    <div class="well well-sm product-info product_informationss">
			{% if (share_status) %} 
				<script src="//yastatic.net/share2/share.js" charset="utf-8"></script>
				<div class="ya-share2" data-services="vkontakte,facebook,odnoklassniki,moimir,twitter,viber,whatsapp" data-size="s"></div>
			{% endif %} 
            {% if (options) %} 
				{% if (revtheme_product_all['options_buy'] and options_buy) %} 
					<div class="options_buy">
						<table class="table">
							<thead>
								<tr>
									{% if (revtheme_product_all['options_buy_foto']) %} 
										<td class="text-left hidden-xs">
											{{ text_foto_option }} 
										</td>
									{% endif %} 
									<td class="text-left">
									{% if (revtheme_product_all['options_buy_optionname'] and revtheme_product_all['options_buy_optionname_one']) %} 
										{% for option in options %} 
										{{ option['name'] }} 
										{% endfor %} 
									{% else %} 
										{{ text_option_option }} 
									{% endif %} 
									</td>
									{% if (revtheme_product_all['options_buy_model']) %} 
										<td class="text-center options_buy_model">{{ text_model_option }}</td>
									{% endif %} 
									<td class="text-center options_buy_price">{{ text_price_option }}</td>
									{% if (revtheme_product_all['options_buy_quantity']) %} 
										<td class="text-center options_buy_dostupno">{{ text_dostupno_option }}</td>
									{% endif %} 
									<td class="text-center options_buy_quantity">{{ text_quantity_option }}</td>
									<td class="text-center"></td>
								</tr>
							</thead>
							<tbody>
								{% for option in options %} 
									{% if (revtheme_product_all['options_buy_optionname'] and not revtheme_product_all['options_buy_optionname_one']) %} 
										<tr>
										{% if (not revtheme_product_all['options_buy_quantity']) %} 
											{% set colspan_option_name = 5 %}
										 {% elseif (not revtheme_product_all['options_buy_quantity'] and not revtheme_product_all['options_buy_quantity']) %} 
											{% set colspan_option_name = 4 %}
										 {% else %} 
											{% set colspan_option_name = 6 %}
										 {% endif %}  
											<td colspan="{{ colspan_option_name }}" class="text-left">
												<b style="font-size:13px">{{ option['name'] }}:</b>
											</td>
										</tr>
									{% endif %} 
									{% for option_value in option['product_option_value'] %} 
										{% if (option_value['price'] > 0 and option_value['quantity'] > 0) %} 
											<tr class="pro_{{ option_value['product_option_value_id'] }}">
												<input type="hidden" name="option[{{ option['product_option_id'] }}]" value="" />
												{% if (revtheme_product_all['options_buy_foto']) %} 
													<td class="text-left hidden-xs">
														{% if (option_value['image']) %} 
															<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail img-responsive" />
														{% endif %} 
													</td>
												{% endif %} 
												<td class="text-left">
													{% if (revtheme_product_all['options_buy_click']) %} 
														<div class="radio">
															<label for="optb_{{ product_id }}_{{ option_value['product_option_value_id'] }}">
																<input onchange="update_options_buy({{ product_id }},{{ option['product_option_id'] }},{{ option_value['product_option_value_id'] }});" type="radio" name="option_{{ product_id }}" value="{{ option_value['product_option_value_id'] }}" id="optb_{{ product_id }}_{{ option_value['product_option_value_id'] }}" />
																<span class="options_buy_image_title">{{ option_value['name'] }}</span>					
															</label>
														</div>
													{% else %}	
														{{ option_value['name'] }} 
													{% endif %} 
												</td>
												{% if (revtheme_product_all['options_buy_model']) %} 
													<td class="text-center options_buy_model">
														{% if (option_value['model']) %}{{ option_value['model'] }}{% else %}{{ model }}{% endif %} 
													</td>
												{% endif %} 
												<td class="text-center options_buy_price">
													{{ option_value['price'] }} 
												</td>
												{% if (revtheme_product_all['options_buy_quantity']) %} 
													<td class="text-center options_buy_dostupno">
														{{ option_value['quantity'] }} {{ shtuki }} 
														<input type="hidden" class="option_value_quantity" value='{{ minimum }}'>
													</td>
												{% endif %} 
												<td class="text-center options_buy_quantity">
													<div class="number">
														<div class="frame-change-count">
															<div class="btn-plus">
																<button type="button" onclick="validate_pole_product_options(this,{{ option_value['product_option_value_id'] }},'+',{{ minimum }},{{ option_value['quantity'] }});">+</button>
															</div>
															<div class="btn-minus">
																<button type="button" onclick="validate_pole_product_options(this,{{ option_value['product_option_value_id'] }},'-',{{ minimum }},{{ option_value['quantity'] }});">-</button>
															</div>
														</div>
														<input type="text" name="quantity" class="plus-minus" value='{{ minimum }}' onchange="validate_pole_product_options(this,{{ option_value['product_option_value_id'] }},'=',{{ minimum }},{{ option_value['quantity'] }});" onkeyup="validate_pole_product_options(this,{{ option_value['product_option_value_id'] }},'=',{{ minimum }},{{ option_value['quantity'] }});">
													</div>
												</td>
												<td class="text-center">
													<div class="cart">
														<a onclick="get_revpopup_cart_option({{ option['product_option_id'] }},{{ option_value['product_option_value_id'] }},get_revpopup_cart_pr_option_quantity('{{ option_value['product_option_value_id'] }}'),{{ product_id }});return false;"><i class="fa fa-border fa-shopping-basket"><span class="prlistb hidden-xs hidden-md">{{ button_cart }}</span></i></a>
													</div>
												</td>
											</tr>
										{% endif %} 
									{% endfor %} 
								{% endfor %}  
							</tbody>
						</table>
						<script><!--
							function validate_pole_product_options (val, product_option_value_id, znak, minimumvalue, maximumvalue) {
								val.value = val.value.replace(/[^\d,]/g, '');
								if (val.value == '') val.value = minimumvalue;
								if (maximumvalue < 1) maximumvalue = 9999;
								input_val = $('.pro_'+product_option_value_id+' .plus-minus');
								quantity = parseInt(input_val.val());
								{% if (q_zavisimost) %} 
								if(znak=='+' && input_val.val() < maximumvalue) input_val.val(quantity+1);
								else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
								else if(znak=='=' && input_val.val() < maximumvalue && input_val.val() < maximumvalue) input_val.val(input_val.val());
								if (quantity < 1 || quantity < minimumvalue) {
									input_val.val(minimumvalue);
									val.value = minimumvalue;
								} else if (quantity > maximumvalue) {
									input_val.val(maximumvalue);
									val.value = maximumvalue;
								}
								{% else %} 
								if(znak=='+') input_val.val(quantity+1);
								else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
								else if(znak=='=' && input_val.val() > minimumvalue) input_val.val(input_val.val());
								if (quantity < 1 || quantity < minimumvalue) {
									input_val.val(minimumvalue);
									val.value = minimumvalue;
								}
								{% endif %} 
							}
							function get_revpopup_cart_pr_option_quantity (product_option_value_id) {
								input_val = $('.pro_'+product_option_value_id+' .plus-minus').val();
								quantity  = parseInt(input_val);
								return quantity;
							}
						//--></script>
					</div>
				 {% else %} 
					<div class="options_no_buy">
						{% for option in options %} 
							{% if (option['type'] == 'select') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
									<label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
									<select onchange="update_prices_product({{ product_id }},{{ minimum }});" name="option[{{ option['product_option_id'] }}]" id="input-option{{ option['product_option_id'] }}" class="form-control">
										<option value="">{{ text_select }}</option>
										{% for option_value in option['product_option_value'] %} 
											<option value="{{ option_value['product_option_value_id'] }}">{{ option_value['name'] }} 
												{% if (opt_price) %} 
													{% if (option_value['price']) %} 
														<span class="option_price">({{ option_value['price_prefix'] }}{{ option_value['price'] }})</span>
													{% endif %} 
												{% endif %} 
											</option>
										{% endfor %} 
									</select>
								</div>
							{% endif %} 
							{% if (option['type'] == 'radio') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
									<label class="control-label">{{ option['name'] }}:</label>
									<div id="input-option{{ option['product_option_id'] }}">
										{% for option_value in option['product_option_value'] %} 
											<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
												{% if (option_value['model'] is defined and option_value['model'] matches '{#^http[s]{0,1}://#}') %} 
													<input onchange="location='{{ option_value['model'] }}';" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
												{% else %} 
													<input onchange="update_prices_product({{ product_id }},{{ minimum }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
												{% endif %} 
												<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
													{% if (option_value['image']) %} 
														<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
													{% else %} 
														<span>{{ option_value['name'] }}</span>
													{% endif %} 
													{% if (option_value['price']) %} 
														<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
													{% endif %} 
													<i class="fa fa-check"></i>	
												</label>
											</div>
										{% endfor %} 
									</div>
								</div>
							{% endif %} 
							{% if (option['type'] == 'checkbox') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
									<label class="control-label">{{ option['name'] }}:</label>
									<div id="input-option{{ option['product_option_id'] }}">
										{% for option_value in option['product_option_value'] %} 
											<div class="radio checkbox{% if (option['opt_image']) %} opt_with_img{% endif %}">
												<input onchange="update_prices_product({{ product_id }},{{ minimum }});" type="checkbox" name="option[{{ option['product_option_id'] }}][]" value="{{ option_value['product_option_value_id'] }}" id="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
												<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
													{% if (option_value['image']) %} 
														<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
													{% else %} 
														<span>{{ option_value['name'] }}</span>
													{% endif %} 
													{% if (option_value['price']) %} 
														<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
													{% endif %} 
													<i class="fa fa-check"></i>
												</label>
											</div>
										{% endfor %} 
									</div>
								</div>
							{% endif %} 
							{% if (option['type'] == 'image') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
									<label class="control-label">{{ option['name'] }}:</label>
									<div id="input-option{{ option['product_option_id'] }}">
										{% for option_value in option['product_option_value'] %} 
											<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
												<input onchange="update_prices_product({{ product_id }},{{ minimum }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
												<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
													{% if (option_value['image']) %} 
														<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
													{% else %} 
														<span>{{ option_value['name'] }}</span>
													{% endif %} 
													{% if (option_value['price']) %} 
														<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
													{% endif %} 
													<i class="fa fa-check"></i>	
												</label>
											</div>
										{% endfor %} 
									</div>
								</div>
							{% endif %} 
							{% if (option['type'] == 'text') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
								  <input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control" />
								</div>
							{% endif %} 
							{% if (option['type'] == 'textarea') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
								  <textarea name="option[{{ option['product_option_id'] }}]" rows="5" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control">{{ option['value'] }}</textarea>
								</div>
							{% endif %} 
							{% if (option['type'] == 'file') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label">{{ option['name'] }}:</label>
								  <button type="button" id="button-upload{{ option['product_option_id'] }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
								  <input type="hidden" name="option[{{ option['product_option_id'] }}]" value="" id="input-option{{ option['product_option_id'] }}" />
								</div>
							{% endif %} 
							{% if (option['type'] == 'date') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
								  <div class="input-group date">
									<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD" id="input-option{{ option['product_option_id'] }}" class="form-control" />
									<span class="input-group-btn">
									<button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
									</span></div>
								</div>
							{% endif %} 
							{% if (option['type'] == 'datetime') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
								  <div class="input-group datetime">
									<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
									<span class="input-group-btn">
									<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
									</span></div>
								</div>
							{% endif %} 
							{% if (option['type'] == 'time') %} 
								<div class="form-group{{ option['required'] ? ' required' : '' }}">
								  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
								  <div class="input-group time">
									<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
									<span class="input-group-btn">
									<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
									</span></div>
								</div>
							{% endif %} 
						{% endfor %} 
					</div>
					<hr>
				{% endif %} 
            {% endif %} 
			{% if ((options and not revtheme_product_all['options_buy']) or not options_buy) %} 
            {% if (recurrings) %} 
            <hr>
            <h3>{{ text_payment_recurring }}</h3>
            <div class="form-group required">
              <select name="recurring_id" class="form-control">
                <option value="">{{ text_select }}</option>
                {% for recurring in recurrings %} 
                <option value="{{ recurring['recurring_id'] }}">{{ recurring['name'] }}</option>
                {% endfor %} 
              </select>
              <div class="help-block" id="recurring-description"></div>
            </div>
            {% endif %} 
            <div class="form-group">
				{% if (price) %} 
				{% if (price_number > 0) %} 
				  <div class="list-unstyled" itemprop="offers" itemscope itemtype="http://schema.org/Offer">
					<span class="prq_title hidden-xs">{{ text_product_all_stoimost }}</span>
					{% if (not special) %} 
					<span class="update_price">{{ price }}</span>
					<span class="update_special dnone"></span>
					<meta itemprop="price" content="{{ price_number }}">
					{% else %} 
					<span class="update_price oldprice">{{ price }}</span>
					<span class="update_special">{{ special }}</span>
					<meta itemprop="price" content="{{ special_number }}">
					{% if (special_end) %} 
						<div class="countdown">{{ text_countdown }} <span id="countdown"></span></div>
						<script><!--
							function countdown_timer(){
								var names = {
								days:      JSON.parse(JSON.stringify({1:" день ", 2:" дня ", 3: " дней "})),
								hours:     JSON.parse(JSON.stringify({1:" час ", 2: " часа ", 3: " часов "})),
								minutes:   JSON.parse(JSON.stringify({1:" минута ", 2: " минуты ", 3: " минут "})),
								seconds:   JSON.parse(JSON.stringify({1:" секунда ", 2: " секунды ", 3: " секунд "})),
								};
								var day_name = names['days'][3];
								var hur_name = names['hours'][3];
								var min_name = names['minutes'][3];
								var sec_name = names['seconds'][3];
								var today = new Date();
								function parseDate(input) {
								var parts = input.match(/(\d+)/g);
								return new Date(parts[0], parts[1]-1, parts[2]);
								}
								var BigDay = parseDate('{{ special_end }}');
								var timeLeft = (BigDay.getTime() - today.getTime());
								var e_daysLeft = timeLeft / 86400000;
								var daysLeft = Math.floor(e_daysLeft);
								var slice_day = String(daysLeft).slice(-1);
								if(parseInt(slice_day) == 1 && (parseInt(daysLeft) < 10 || parseInt(daysLeft) > 20)){
									day_name = names['days'][1];
								}else if((parseInt(slice_day) == 2 || parseInt(slice_day) == 3 || parseInt(slice_day) == 4) && (parseInt(daysLeft) < 10 || parseInt(daysLeft) > 20)){
									day_name = names['days'][2];
								}else{
									day_name = names['days'][3];
								}
								var e_hrsLeft = (e_daysLeft - daysLeft)*24;
								var hrsLeft = Math.floor(e_hrsLeft);
								var slice_hours = String(hrsLeft).slice(-1);
								if(parseInt(slice_hours) == 1 && (parseInt(hrsLeft) < 10 || parseInt(hrsLeft) > 20)){
									hur_name = names['hours'][1];
								}else if((parseInt(slice_hours) == 2 || parseInt(slice_hours) == 3 || parseInt(slice_hours) == 4)  && (parseInt(hrsLeft) < 10 || parseInt(hrsLeft) > 20)){
									hur_name = names['hours'][2];
								}else{
									hur_name = names['hours'][3];
								}
								var e_minsLeft = (e_hrsLeft - hrsLeft)*60;
								var minsLeft = Math.floor(e_minsLeft);
								var slice_min = String(minsLeft).slice(-1);
								if(parseInt(slice_min) == 1 && (parseInt(minsLeft) < 10 || parseInt(minsLeft) > 20)){
									min_name = names['minutes'][1];
								}else if((parseInt(slice_min) == 2 || parseInt(slice_min) == 3 || parseInt(slice_min) == 4) && (parseInt(minsLeft) < 10 || parseInt(minsLeft) > 20)){
									min_name = names['minutes'][2];
								}else{
									min_name = names['minutes'][3];
								}
								var seksLeft = Math.floor((e_minsLeft - minsLeft)*60);
								if(seksLeft < 10){
									seksLeft = '0'+seksLeft;
								}
								var slice_sec = String(seksLeft).slice(-1);
								if(parseInt(slice_sec) == 1 && (parseInt(seksLeft) < 10 || parseInt(seksLeft) > 20)){
									sec_name = names['seconds'][1];
								}else if((parseInt(slice_sec) == 2 || parseInt(slice_sec) == 3 || parseInt(slice_sec) == 4) && (parseInt(seksLeft) < 10 || parseInt(seksLeft) > 20)){
									sec_name = names['seconds'][2];
								}else{
									sec_name = names['seconds'][3];
								}
								if (BigDay.getTime() > today.getTime() ){
									if (daysLeft <= 0) {
										if (minsLeft <= 0) {
											document.getElementById("countdown").innerHTML = hrsLeft+hur_name;
										} else {
											document.getElementById("countdown").innerHTML = hrsLeft+hur_name+minsLeft+min_name+seksLeft+sec_name;
										}
									} else {
										if (minsLeft <= 0) {
											document.getElementById("countdown").innerHTML = daysLeft+day_name+hrsLeft+hur_name;
										} else {
											document.getElementById("countdown").innerHTML = daysLeft+day_name+hrsLeft+hur_name+minsLeft+min_name+seksLeft+sec_name;
										}
									}
									if (daysLeft <= 0 && hrsLeft <= 0) {
										if (minsLeft <= 0) {
											document.getElementById("countdown").innerHTML = '';
										} else {
											document.getElementById("countdown").innerHTML = minsLeft+min_name+seksLeft+sec_name;
										}
									} else {
										if (minsLeft <= 0) {
											document.getElementById("countdown").innerHTML = daysLeft+day_name+hrsLeft+hur_name;
										} else {
											document.getElementById("countdown").innerHTML = daysLeft+day_name+hrsLeft+hur_name+minsLeft+min_name+seksLeft+sec_name;
										}
									}
								}
							}
							setInterval("countdown_timer()", 100);
						//--></script>
					{% endif %} 
					{% endif %} 
					{% if (points) %} 
					<div class="reward-product">{{ text_points }} <span class="pr_points">{{ points }}</span></div>
					{% endif %} 
					<link itemprop="availability" href="http://schema.org/{{ quantity > 0?"InStock":"OutOfStock" }}" />
					<meta itemprop="priceCurrency" content="{{ currency_code }}">
				  </div>
				{% else %} 
				<div class="list-unstyled">{{ text_catalog_price_na_zakaz }}</div>
				{% endif %} 
				{% endif %} 
				<div class="nalich">
					{% if (bonusbals_status) %} 
						{% if (reward) %} 
							<div class="reward"><span data-toggle="tooltip" data-placement="top" title="{{ text_product_bonus_tooltip }}">+ {{ reward }} {{ text_product_bonusov }}</span></div>
						{% endif %} 
					{% endif %}	
					{% if (sklad_status) %} 
						{% if (quantity > 0) %}<span class="text-success bg-success"><i class="fa fa-check" aria-hidden="true"></i> {{ text_product_instock }}</span>{% else %}<span class="text-danger-inproduct bg-danger"><i class="fa fa-times" aria-hidden="true"></i> {{ stock_st }}</span>{% endif %} 
					{% endif %} 
				</div>
			</div>
			{% endif %} 
			{% if (discounts and not special) %} 
			<div class="discounts"{% if ((options and revtheme_product_all['options_buy']) and options_buy) %}style="padding: 0;"{% endif %}>
			<hr>
			{% for discount in discounts %} 
			<span>{{ discount['quantity'] }}{{ text_discount }}{{ discount['price'] }}</span><br/>
			{% endfor %} 
			</div>
			{% endif %} 
			{% if (minimum > 1) %} 
			<div class="clearfix"></div>
            <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_minimum }}<input type="hidden" class="minimumvalue" value="{{ minimum }}"></div>
            {% endif %} 
			{% if ((options and not revtheme_product_all['options_buy']) or not options_buy) %} 
				{% if (((price_number > 0 or zakaz_price_null) and (zakaz or quantity > 0 or predzakaz_button)) or rev_srav_prod or rev_wish_prod or (popup_purchase and (price_number > 0 or zakaz_price_null) and (zakaz or quantity > 0))) %} 
					<div class="form-group pokupka">
						{% if ((price_number > 0 or zakaz_price_null) and (zakaz or quantity > 0)) %} 
							{% if (quantity < 1 and predzakaz_button) %} 
								<div class="pop_left">
									<input type="hidden" name="quantity" class="plus-minus" value="{{ minimum }}">
									<button type="button" id="button-cart" onclick="get_revpopup_predzakaz({{ product_id }});"><i class="fa fa-shopping-basket predzakaz"></i>{{ text_predzakaz }}</button>
								</div>
							{% else %} 
								<div class="pop_left">
									<label class="control-label prq_title hidden-xs">{{ text_product_kolichvo }}</label>
									<div class="number">
										<div class="frame-change-count">
											<div class="btn-plus">
												<button type="button" onclick="validate_pole(this,{{ product_id }},'+',{{ minimum }},{{ quantity }});">+</button>
											</div>
											<div class="btn-minus">
												<button type="button" onclick="validate_pole(this,{{ product_id }},'-',{{ minimum }},{{ quantity }});">-</button>
											</div>
										</div>
										<input type="text" name="quantity" class="plus-minus" value="{{ minimum }}" onchange="validate_pole(this,{{ product_id }},'=',{{ minimum }},{{ quantity }});" onkeyup="validate_pole(this,{{ product_id }},'=',{{ minimum }},{{ quantity }});">
									</div>
									<button type="button" id="button-cart" onclick="get_revpopup_cart({{ product_id }},'product',get_revpopup_cart_quantity('{{ product_id }}'));" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg"><i class="fa fa-shopping-basket"></i>{{ button_cart }}</button>
								</div>
							{% endif %} 
						{% else %} 
							{% if (predzakaz_button) %} 
								<div class="pop_left">
									<input type="hidden" name="quantity" class="plus-minus" value="{{ minimum }}">
									<button type="button" id="button-cart" onclick="get_revpopup_predzakaz({{ product_id }});"><i class="fa fa-shopping-basket predzakaz"></i>{{ text_predzakaz }}</button>
								</div>
							{% else %} 
								<input type="hidden" name="quantity" class="plus-minus" value="{{ minimum }}">
							{% endif %} 
						{% endif %} 
						{% if (rev_srav_prod or rev_wish_prod or popup_purchase) %} 
							<div class="pop_right {% if (columns_dd) %} {{ 'columns_dd' }} {% endif %}">
							{% if (popup_purchase and (price_number > 0 or zakaz_price_null) and (zakaz or quantity > 0)) %} 
								<a class="pop_ico" onclick="get_revpopup_purchase('{{ product_id }}');"><i class='fa fa-border fa-gavel'></i><span class="hidden-xs hidden-md">{{ text_catalog_revpopup_purchase }}</span></a>
							{% endif %} 
							{% if (rev_wish_prod) %} 
								<a class="{{ wishlist_class }} wishlist pjid_{{ product_id }}" data-toggle="tooltip" onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}"><i class="fa fa-border fa-heart"></i></a>
							{% endif %} 
							{% if (rev_srav_prod) %} 
								<a class="{{ compare_class }} compare pjid_{{ product_id }}" data-toggle="tooltip" onclick="compare.add('{{ product_id }}', '{{ brand }}');" title="{{ button_compare }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
							{% endif %} 
							</div>
						{% endif %} 
						{% if (text_blocks_all or text_blocks) %} 
							<div class="preimushestva">
								{% if (text_block_zagolovok) %} 
									<h4 style="margin-bottom: 0; margin-top: 20px;">{{ text_block_zagolovok }}</h4>
								{% endif %} 
								{% if (text_blocks_all) %} 
									{% for block in text_blocks_all %} 
										<div class="home_block p_text_blocks_all {{ text_block_cols_all }}">
											{% if (block['link']) %} 
												<a href="{{ block['link'] }}" {% if (block['checkbox']) %}class="popup_html_content"{% endif %}>
											{% endif %} 
												<div class="image {{ block['style'] }}">{{ block['image'] }}</div>
												{% if (block['title'] or block['description']) %} 
													<div class="text">
														{% if (block['title']) %} 
															<span class="title">{{ block['title'] }}</span>
														{% endif %} 
														{% if (block['description']) %} 
															<p>{{ block['description'] }}</p>
														{% endif %} 
													</div>
												{% endif %} 
											{% if (block['link']) %} 
											</a>
											{% endif %} 
										</div>
									{% endfor %} 
								{% endif %} 
								{% if (text_blocks_all and text_blocks) %}<div class="clearfix"></div><hr style="margin: 20px -10px 0px -10px;">{% endif %} 
								{% if (text_blocks) %} 
									{% for block in text_blocks %} 
										<div class="home_block p_text_blocks {{ text_block_cols }}">
											{% if (block['link']) %} 
												<a href="{{ block['link'] }}" {% if (block['checkbox']) %}class="popup_html_content"{% endif %}>
											{% endif %} 
												<div class="image {{ block['style'] }}">{{ block['image'] }}</div>
												{% if (block['title'] or block['description']) %} 
													<div class="text">
														{% if (block['title']) %} 
															<span class="title">{{ block['title'] }}</span>
														{% endif %} 
														{% if (block['description']) %} 
															<p>{{ block['description'] }}</p>
														{% endif %} 
													</div>
												{% endif %} 
											{% if (block['link']) %} 
											</a>
											{% endif %} 
										</div>
									{% endfor %} 
								{% endif %} 
							</div>
						{% endif %} 
					</div>
				{% endif %} 
			{% else %} 
				{% if (points or bonusbals_status or sklad_status or rev_srav_prod or rev_wish_prod or popup_purchase) %} 
					<hr>
				{% endif %} 
				{% if (points) %} 
					<div class="reward-product" style="float: left; padding-bottom: 10px;">{{ text_points }} <span class="pr_points">{{ points }}</span></div>
				{% endif %} 
				{% if (bonusbals_status or sklad_status) %} 
					<div class="nalich" style="padding-bottom: 10px;">
						{% if (bonusbals_status) %} 
							{% if (reward) %} 
								<div class="reward"><span data-toggle="tooltip" data-placement="top" title="{{ text_product_bonus_tooltip }}">+ {{ reward }} {{ text_product_bonusov }}</span></div>
							{% endif %} 
						{% endif %}	
						{% if (sklad_status) %} 
							{% if (quantity > 0) %}<span class="text-success bg-success"><i class="fa fa-check" aria-hidden="true"></i> {{ text_product_instock }}</span>{% else %}<span class="text-danger-inproduct bg-danger"><i class="fa fa-times" aria-hidden="true"></i> {{ stock_st }}</span>{% endif %} 
						{% endif %} 
					</div>
					<div class="clearfix"></div>
				{% endif %} 
				<div class="form-group pokupka">
					{% if (rev_srav_prod or rev_wish_prod or popup_purchase) %} 
						<div class="pop_right {% if (columns_dd) %} {{ 'columns_dd' }} {% endif %}" style="{% if (text_blocks_all or text_blocks) %}padding-bottom: 10px;{% endif %} margin-top: 0;">
						{% if (popup_purchase and (price_number > 0 or zakaz_price_null) and (zakaz or quantity > 0)) %} 
							<a class="pop_ico" onclick="get_revpopup_purchase('{{ product_id }}');"><i class='fa fa-border fa-gavel'></i><span>{{ text_catalog_revpopup_purchase }}</span></a>
						{% endif %} 
						{% if (rev_wish_prod) %} 
							<a class="{{ wishlist_class }} wishlist pjid_{{ product_id }}" data-toggle="tooltip" onclick="wishlist.add('{{ product_id }}');" title="{{ button_wishlist }}"><i class="fa fa-border fa-heart"></i></a>
						{% endif %} 
						{% if (rev_srav_prod) %} 
							<a class="{{ compare_class }} compare pjid_{{ product_id }}" data-toggle="tooltip" onclick="compare.add('{{ product_id }}', '{{ brand }}');" title="{{ button_compare }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
						{% endif %} 
						</div>
					{% endif %} 
					{% if (text_blocks_all or text_blocks) %} 
						<div class="preimushestva optsbuy">
							{% if (text_block_zagolovok) %} 
								<h4 style="margin-bottom: 0; margin-top: 20px;">{{ text_block_zagolovok }}</h4>
							{% endif %} 
							{% if (text_blocks_all) %} 
								{% for block in text_blocks_all %} 
									<div class="home_block p_text_blocks_all {{ text_block_cols_all }}">
										{% if (block['link']) %} 
											<a href="{{ block['link'] }}" {% if (block['checkbox']) %}class="popup_html_content"{% endif %}>
										{% endif %} 
											<div class="image {{ block['style'] }}">{{ block['image'] }}</div>
											{% if (block['title'] or block['description']) %} 
												<div class="text">
													{% if (block['title']) %} 
														<span class="title">{{ block['title'] }}</span>
													{% endif %} 
													{% if (block['description']) %} 
														<p>{{ block['description'] }}</p>
													{% endif %} 
												</div>
											{% endif %} 
										{% if (block['link']) %} 
										</a>
										{% endif %} 
									</div>
								{% endfor %} 
							{% endif %} 
							{% if (text_blocks_all and text_blocks) %}<div class="clearfix"></div><hr style="margin: 20px -10px 0px -10px;">{% endif %} 
							{% if (text_blocks) %} 
								{% for block in text_blocks %} 
									<div class="home_block p_text_blocks {{ text_block_cols }}">
										{% if (block['link']) %} 
											<a href="{{ block['link'] }}" {% if (block['checkbox']) %}class="popup_html_content"{% endif %}>
										{% endif %} 
											<div class="image {{ block['style'] }}">{{ block['image'] }}</div>
											{% if (block['title'] or block['description']) %} 
												<div class="text">
													{% if (block['title']) %} 
														<span class="title">{{ block['title'] }}</span>
													{% endif %} 
													{% if (block['description']) %} 
														<p>{{ block['description'] }}</p>
													{% endif %} 
												</div>
											{% endif %} 
										{% if (block['link']) %} 
										</a>
										{% endif %} 
									</div>
								{% endfor %} 
							{% endif %} 
						</div>
					{% endif %} 
				</div>
			{% endif %} 
			</div>
			{% endif %} 
        </div>
		<div style="height: 20px; width: 100%; clear: both;"></div>
		<div class="col-sm-12 mb20">
		{% if (revtheme_product_all['pr_tabs']) %} 
			<ul class="nav nav-tabs">
				{% if (description) %} 
				<li class="active"><a href="#tab-description" data-toggle="tab">{{ tab_description }}</a></li>
				{% endif %} 
				{% if (not atributs) %} 
				{% if (attribute_groups) %} 
				<li><a href="#tab-specification" data-toggle="tab">{{ tab_attribute }}</a></li>
				{% endif %} 
				{% endif %} 
				{% if (review_status) %} 
				<li><a href="#tab-review" data-toggle="tab">{{ tab_review }}</a></li>
				{% endif %} 
				{% if (revanswers) %} 
				<li><a href="#tab-answers" data-toggle="tab">{{ tab_answers }}</a></li>
				{% endif %} 
				{% for info in tab_info %} 
				<li><a href="#tab-extratab{{ info['tab_id'] }}" data-toggle="tab">{{ info['title'] }}</a></li>
				{% endfor %} 
				{% for key,tab in product_tabs %} 
				<li><a href="#tab-{{ product_id }}-{{ tab['product_tab_id'] }}" data-toggle="tab">{{ tab['title'] }}</a></li>
				{% endfor %} 
				{% if (revblogs and blogs) %} 
				<li><a href="#tab-blogs" data-toggle="tab">{{ text_relblogs }}</a></li>
				{% endif %} 
			</ul>		  
			<div class="tab-content">
				<div class="tab-pane active" id="tab-description" itemprop="description">{{ description }}</div>
				{% for info in tab_info %} 
				<div class="tab-pane" id="tab-extratab{{ info['tab_id'] }}">{{ info['description'] }}</div>
				{% endfor %} 
				{% for key,tab in product_tabs %} 
				<div class="tab-pane" id="tab-{{ product_id }}-{{ tab['product_tab_id'] }}">{{ tab['description'] }}</div>
				{% endfor %} 

				{% if (not atributs) %} 
				{% if (attribute_groups) %} 
				<div class="tab-pane" id="tab-specification">         
					{% if (atributs_group_name) %} 
						{% for attribute_group in attribute_groups %} 
						<table class="table attrbutes mb0">
						<thead>
							<tr>
							<td colspan="2">{{ attribute_group['name'] }}</td>
							</tr>
						</thead>		
							<tbody>
							{% for attribute in attribute_group['attribute'] %} 
							<tr itemprop="additionalProperty" itemscope itemtype="http://schema.org/PropertyValue">
							<td itemprop="name">{{ attribute['name'] }}</td>
							<td itemprop="value">{{ attribute['text'] }}</td>
							</tr>
							{% endfor %} 
						</tbody>
						</table>
						{% endfor %} 
					{% else %}	
						<table class="table attrbutes mb0">
						<tbody>
						{% for attribute_group in attribute_groups %} 
						{% for attribute in attribute_group['attribute'] %} 
						<tr itemprop="additionalProperty" itemscope itemtype="http://schema.org/PropertyValue">
						<td itemprop="name">{{ attribute['name'] }}</td>
						<td itemprop="value">{{ attribute['text'] }}</td>
						</tr>
						{% endfor %} 
						{% endfor %} 
						</tbody>
						</table>
					{% endif %} 
				</div>
				{% endif %} 
				{% endif %}		
				{% if (review_status) %} 
				<div class="tab-pane" id="tab-review">
				<div id="review"></div>
					{% if (review_guest) %} 
					<div class="form-group required mb0 mt12">
							<div class="well well-sm otz">
								<div class="text-right">
									<a class="btn btn-primary" id="open-review-box"><i class="fa fa-comment-o" aria-hidden="true"></i>{{ text_product_wr_review }}</a>
								</div>						
								<div class="row" id="post-review-box" style="display:none;">
									<div class="col-md-12">
										<form class="form-review form-horizontal">
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-name">{{ entry_rev_p_name }}</label>
												<div class="col-sm-10">
													<input type="text" name="name" value="" id="input-name" class="form-control" />
												</div>
											</div>
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-review">{{ entry_rev_p_review }}</label>
												<div class="col-sm-10">
													<textarea name="text" rows="5" id="input-review" class="form-control"></textarea>
												</div>
											</div>
											<div class="form-group required">
												<label class="col-sm-2 control-label">{{ entry_rating }}</label>
												<div class="col-sm-10">
													<div class="prod-rating">
														<input id="rat1" type="radio" name="rating" value="1" /><label class="rat-star" for="rat1"><i class="fa fa-star"></i></label>
														<input id="rat2" type="radio" name="rating" value="2" /><label class="rat-star" for="rat2"><i class="fa fa-star"></i></label>
														<input id="rat3" type="radio" name="rating" value="3" /><label class="rat-star" for="rat3"><i class="fa fa-star"></i></label>
														<input id="rat4" type="radio" name="rating" value="4" /><label class="rat-star" for="rat4"><i class="fa fa-star"></i></label>
														<input id="rat5" type="radio" name="rating" value="5" /><label class="rat-star" for="rat5"><i class="fa fa-star"></i></label>
													</div>
													<script><!--
														$('.rat-star').hover(function () {
															$(this).prevAll('.rat-star').addClass('active');
															$(this).addClass('active');
														},function () {
															$(this).prevAll('.rat-star').removeClass('active');
															$(this).removeClass('active');
														});
														
														$('.rat-star').click(function(){
															$('.rat-star').each(function(){
																$(this).removeClass('checked');
																$(this).prevAll('.rat-star').removeClass('checked');
															});
															
															$(this).addClass('checked');
															$(this).prevAll('.rat-star').addClass('checked');
														});
														
													//--></script>
												</div>
											</div>
											{{ captcha }} 
											<div class="pull-right text-right">
												<a class="btn btn-default" href="#" id="close-review-box" style="display:none; margin-right: 10px;">{{ text_product_otmena }}</a>
												<button type="button" id="button-review" data-loading-text="{{ text_loading }}" class="btn btn-danger">{{ entry_rev_p_send }}</button>
											</div>					
										</form>
									</div>
								</div>
							</div>
							<script><!--
							$('#open-review-box').click(function(e) {
							$('#post-review-box').slideDown(400, function() {
							$('#new-review').trigger('autosize.resize');
							$('#new-review').focus();
							});
							$('#open-review-box').fadeOut(100);
							$('#close-review-box').show();
							});

							$('#close-review-box').click(function(e) {
							e.preventDefault();
							$('#post-review-box').slideUp(300, function() {
							$('#new-review').focus();
							$('#open-review-box').fadeIn(100);
							});
							$('#close-review-box').hide();
							});
							//--></script>
					</div>              
					{% else %} 
					{{ text_login }} 
					{% endif %} 
				</div>
				{% endif %} 
				{% if (revanswers) %} 
					<div class="tab-pane" id="tab-answers">
						<div id="answers">
							{% if (answers) %} 
								{% for review in answers %} 
								<div class="review-list">
								  <div class="author">{{ review['author'] }}<span> <span class="rdate">/ {{ review['date_added'] }}</span></span></div>
								  <div class="text">{{ review['text'] }}</div>
								  {% if (review['answer']) %} 
									<div class="name_admin">{{ review['answer_from'] }}</div>
									<div class="answer_admin">
										<div>{{ review['answer'] }}</div>
									</div>
								  {% endif %} 
								</div>
								{% endfor %} 
									{% if (results_answers > 10) %} 
									  <div class="row">
										<div class="pagpages clearfix">
											<div class="col-sm-6 text-left">{{ pagination_answers }}</div>
											<div class="col-sm-6 text-right">{{ results_answers }}</div>
										</div>
									  </div>
									{% endif %} 
							{% else %} 
							<p>{{ answers_no_reviews }}</p>
							{% endif %} 
						</div>
						<div class="form-group required mb0 mt12">
							<div class="well well-sm otz">
								<div class="text-right">
									<a class="btn btn-primary" id="open-answers-box"><i class="fa fa-comment-o" aria-hidden="true"></i>{{ entry_rev_p_answer_wrt }}</a>
								</div>						
								<div class="row" id="post-answers-box" style="display:none;">
									<div class="col-md-12">
										<form class="form-answers form-horizontal">
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-name-2">{{ entry_rev_p_name }}</label>
												<div class="col-sm-10">
													<input type="text" name="name_answer" value="" id="input-name-2" class="form-control" />
												</div>
											</div>
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-answer">{{ entry_rev_p_answer }}</label>
												<div class="col-sm-10">
													<textarea name="text_answer" rows="5" id="input-answer" class="form-control"></textarea>
												</div>
											</div>
											{{ captcha2 }} 
											<div class="pull-right text-right">
												<a class="btn btn-default" href="#" id="close-answers-box" style="display:none; margin-right: 10px;">{{ text_product_otmena }}</a>
												<button type="button" id="button-answers" data-loading-text="{{ text_loading }}" class="btn btn-danger">{{ entry_rev_p_send }}</button>
											</div>					
										</form>
									</div>
								</div>
							</div>
							<script><!--
							$('#open-answers-box').click(function(e) {
							$('#post-answers-box').slideDown(400, function() {
							$('#new-answers').trigger('autosize.resize');
							$('#new-answers').focus();
							});
							$('#open-answers-box').fadeOut(100);
							$('#close-answers-box').show();
							});

							$('#close-answers-box').click(function(e) {
							e.preventDefault();
							$('#post-answers-box').slideUp(300, function() {
							$('#new-answers').focus();
							$('#open-answers-box').fadeIn(100);
							});
							$('#close-answers-box').hide();
							});
							//--></script>
						</div>
					</div>
				{% endif %} 
				{% if (revblogs and blogs) %} 
					<div class="tab-pane" id="tab-blogs">
						{% for blog in blogs %} 
							<div class="tab_rb">
								<a href="{{ blog['href'] }}">
									{% if (blog['image']) %} 
										<div class="tab_rb_image">
										<img src="{{ blog['image'] }}" alt="{{ blog['title'] }}" title="{{ blog['title'] }}" class="img-responsive"/>
										</div>
									{% endif %} 
									<div class="tab_rb_title">{{ blog['title'] }}</div>
								</a>
								<div class="tab_rb_description">{{ blog['description'] }}</div>
							</div>
						{% endfor %} 
					</div>
				{% endif %} 
			</div>
		{% else %} 
			<div class="alt_pt_descript">
				{% if (description) %} 
					<div class="rev_slider">
						<div class="heading_h"><h3>{{ tab_description }}</h3></div>
						{{ description }} 
					</div>
				{% endif %} 
				{% if (not atributs) %} 
					{% if (attribute_groups) %} 
						<div class="tab-specification rev_slider">
							<div class="heading_h"><h3>{{ tab_attribute }}</h3></div>
							{% for attribute_group in attribute_groups %} 
								<table class="table attrbutes mb0">
									{% if (atributs_group_name) %} 
										<thead>
											<tr>
												<td colspan="2">{{ attribute_group['name'] }}</td>
											</tr>
										</thead>
									{% endif %} 
									<tbody>
										{% for attribute in attribute_group['attribute'] %} 
											<tr itemprop="additionalProperty" itemscope itemtype="http://schema.org/PropertyValue">
												<td itemprop="name">{{ attribute['name'] }}</td>
												<td itemprop="value">{{ attribute['text'] }}</td>
											</tr>
										{% endfor %} 
									</tbody>
								</table>
							{% endfor %}							
						</div>
					{% endif %} 
				{% endif %} 
				{% if (review_status) %} 
					<div class="tab-review rev_slider">
						<div class="heading_h"><h3>{{ tab_review }}</h3></div>
						<div id="review"></div>
						{% if (review_guest) %} 
							<div class="form-group required mb0 mt12">
								<div class="well well-sm otz">
									<div class="text-right">
										<a class="btn btn-primary" id="open-review-box"><i class="fa fa-comment-o" aria-hidden="true"></i>{{ text_product_wr_review }}</a>
									</div>						
									<div class="row" id="post-review-box" style="display:none;">
										<div class="col-md-12">
											<form class="form-review form-horizontal">
												<div class="form-group required">
													<label class="col-sm-2 control-label" for="input-name">{{ entry_name }}</label>
													<div class="col-sm-10">
														<input type="text" name="name" value="" id="input-name" class="form-control" />
													</div>
												</div>
												<div class="form-group required">
													<label class="col-sm-2 control-label" for="input-review">{{ entry_review }}</label>
													<div class="col-sm-10">
														<textarea name="text" rows="5" id="input-review" class="form-control"></textarea>
													</div>
												</div>
												<div class="form-group required">
													<label class="col-sm-2 control-label">{{ entry_rating }}</label>
													<div class="col-sm-10">
														<div class="prod-rating">
															<input id="rat1" type="radio" name="rating" value="1" /><label class="rat-star" for="rat1"><i class="fa fa-star"></i></label>
															<input id="rat2" type="radio" name="rating" value="2" /><label class="rat-star" for="rat2"><i class="fa fa-star"></i></label>
															<input id="rat3" type="radio" name="rating" value="3" /><label class="rat-star" for="rat3"><i class="fa fa-star"></i></label>
															<input id="rat4" type="radio" name="rating" value="4" /><label class="rat-star" for="rat4"><i class="fa fa-star"></i></label>
															<input id="rat5" type="radio" name="rating" value="5" /><label class="rat-star" for="rat5"><i class="fa fa-star"></i></label>
														</div>
														<script><!--
															$('.rat-star').hover(function () {
																$(this).prevAll('.rat-star').addClass('active');
																$(this).addClass('active');
															},function () {
																$(this).prevAll('.rat-star').removeClass('active');
																$(this).removeClass('active');
															});
															
															$('.rat-star').click(function(){
																$('.rat-star').each(function(){
																	$(this).removeClass('checked');
																	$(this).prevAll('.rat-star').removeClass('checked');
																});
																
																$(this).addClass('checked');
																$(this).prevAll('.rat-star').addClass('checked');
															});
															
														//--></script>
													</div>
												</div>
												{{ captcha }} 
												<div class="pull-right text-right">
													<a class="btn btn-default" href="#" id="close-review-box" style="display:none; margin-right: 10px;">{{ text_product_otmena }}</a>
													<button type="button" id="button-review" data-loading-text="{{ text_loading }}" class="btn btn-danger">{{ entry_rev_p_send }}</button>
												</div>					
											</form>
										</div>
									</div>
								</div>
								<script><!--
								$('#open-review-box').click(function(e) {
								$('#post-review-box').slideDown(400, function() {
								$('#new-review').trigger('autosize.resize');
								$('#new-review').focus();
								});
								$('#open-review-box').fadeOut(100);
								$('#close-review-box').show();
								});

								$('#close-review-box').click(function(e) {
								e.preventDefault();
								$('#post-review-box').slideUp(300, function() {
								$('#new-review').focus();
								$('#open-review-box').fadeIn(100);
								});
								$('#close-review-box').hide();
								});
								//--></script>
							</div>
						{% else %} 
							{{ text_login }} 
						{% endif %} 
					</div>
				{% endif %} 
				{% if (revanswers) %} 
					<div class="tab-review rev_slider">
						<div class="heading_h"><h3>{{ tab_answers }}</h3></div>
						<div id="answers">
							{% if (answers) %} 
								{% for review in answers %} 
								<div class="review-list">
								  <div class="author">{{ review['author'] }}<span> <span class="rdate">/ {{ review['date_added'] }}</span></span></div>
								  <div class="text">{{ review['text'] }}</div>
								  {% if (review['answer']) %} 
									<div class="name_admin">{{ review['answer_from'] }}</div>
									<div class="answer_admin">
										<div>{{ review['answer'] }}</div>
									</div>
								  {% endif %} 
								</div>
								{% endfor %} 
									{% if (results_answers > 10) %} 
									  <div class="row">
										<div class="pagpages clearfix">
											<div class="col-sm-6 text-left">{{ pagination_answers }}</div>
											<div class="col-sm-6 text-right">{{ results_answers }}</div>
										</div>
									  </div>
									{% endif %} 
							{% else %} 
							<p>{{ answers_no_reviews }}</p>
							{% endif %} 
						</div>
						<div class="form-group required mb0 mt12">
							<div class="well well-sm otz">
								<div class="text-right">
									<a class="btn btn-primary" id="open-answers-box"><i class="fa fa-comment-o" aria-hidden="true"></i>{{ entry_rev_p_answer_wrt }}</a>
								</div>						
								<div class="row" id="post-answers-box" style="display:none;">
									<div class="col-md-12">
										<form class="form-answers form-horizontal">
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-name">{{ entry_rev_p_name }}</label>
												<div class="col-sm-10">
													<input type="text" name="name_answer" value="" id="input-name" class="form-control" />
												</div>
											</div>
											<div class="form-group required">
												<label class="col-sm-2 control-label" for="input-answer">{{ entry_rev_p_answer }}</label>
												<div class="col-sm-10">
													<textarea name="text_answer" rows="5" id="input-answer" class="form-control"></textarea>
												</div>
											</div>
											{{ captcha }} 
											<div class="pull-right text-right">
												<a class="btn btn-default" href="#" id="close-answers-box" style="display:none; margin-right: 10px;">{{ text_product_otmena }}</a>
												<button type="button" id="button-answers" data-loading-text="{{ text_loading }}" class="btn btn-danger">{{ entry_rev_p_send }}</button>
											</div>					
										</form>
									</div>
								</div>
							</div>
							<script><!--
							$('#open-answers-box').click(function(e) {
							$('#post-answers-box').slideDown(400, function() {
							$('#new-answers').trigger('autosize.resize');
							$('#new-answers').focus();
							});
							$('#open-answers-box').fadeOut(100);
							$('#close-answers-box').show();
							});

							$('#close-answers-box').click(function(e) {
							e.preventDefault();
							$('#post-answers-box').slideUp(300, function() {
							$('#new-answers').focus();
							$('#open-answers-box').fadeIn(100);
							});
							$('#close-answers-box').hide();
							});
							//--></script>
						</div>
					</div>
				{% endif %} 
				{% if (tab_info) %} 
					{% for info in tab_info %} 
						<div class="rev_slider">
							<div class="heading_h"><h3>{{ info['title'] }}</h3></div>
							{{ info['description'] }} 
						</div>
					{% endfor %} 
				{% endif %} 
				{% if (product_tabs) %} 
					{% for key,tab in product_tabs %} 
						<div class="rev_slider">
							<div class="heading_h"><h3>{{ tab['title'] }}</h3></div>
							{{ tab['description'] }} 
						</div>
					{% endfor %} 
				{% endif %} 
				{% if (blogs) %} 
					<div class="rev_slider">
						<div class="heading_h"><h3>{{ text_relblogs }}</h3></div>
						<ul>
							{% for blog in blogs %} 
								<li><a href="{{ blog['href'] }}">{{ blog['title'] }}</a></li>
							{% endfor %} 
						</ul>
					</div>
				{% endif %} 
			</div>
		{% endif %} 
		  

		</div>
      </div>  
      {% if (products and not recpr_rightc) %} 
	  <div id="product_products" class="rev_slider">
	  <div class="heading_h"><h3>{{ text_related }}</h3></div>
      <div class="row">
	  <div class="product_related">
        {% for product in products %} 
			<div class="product-layout col-lg-12 item">
			  <div class="product-thumb product_{{ product['product_id'] }}">
				<div class="image">
					{% if (product['product_in_cart']) %} 
						<div class="pr_in_cart_i"><i class="fa fa-check"></i></div>
					{% endif %} 
					{% if (img_slider) %} 
						<div class="image owl-carousel owlproduct">
							<div class="item text-center">
								<a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" /></a>
							</div>			
							{% if (product['images']) %} 
								{% for image in product['images'] %} 
									<!--noindex-->
									<div class="item text-center">
										<a href="{{ product['href'] }}"><img src="{{ image['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" rel="nofollow" /></a>
									</div>
									<!--/noindex-->
								{% endfor %} 
							{% endif %} 
						</div>
					{% else %} 
						<a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" /></a>
					{% endif %} 
					{% if (stikers_status) %} 
						<div class="stiker_panel">
							{% if ((product['quantity'] > 0 and product['price_number'] != 0) or zakaz) %} 
								{% if (product['stiker_spec']) %} 
									{% if (product['special']) %} 
										<span class="stiker stiker_spec"><span class="price-old special_no_format{{ product['product_id'] }}">{{ product['price'] }}</span></span>
									{% else %} 
										<span class="hidden special_no_format{{ product['product_id'] }}"></span>
									{% endif %} 
								{% else %} 
									<span class="hidden special_no_format{{ product['product_id'] }}"></span>
								{% endif %} 
							{% else %} 
								<span class="special_no_format{{ product['product_id'] }}" style="display:none"></span>
							{% endif %} 
							{% if (product['stiker_best']) %} 
								<span class="stiker stiker_best">{{ text_catalog_stiker_best }}</span>
							{% endif %} 
							{% if (product['stiker_last']) %} 
								<span class="stiker stiker_last">{{ text_catalog_stiker_last }}</span>
							{% endif %} 
							{% if (product['stiker_sklad_status']) %} 
								<span class="stiker stiker_netu">{{ product['stiker_sklad_status'] }}</span>
							{% elseif (product['stiker_stock']) %} 
								{% if (product['price_number'] == 0 and not zakaz_price_null) %} 
									<span class="stiker stiker_netu">{{ text_catalog_stiker_netu_2 }}</span>
								{% elseif (product['quantity'] < 1 and product['price_number'] > 0 and not zakaz) %} 
									<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
								{% elseif (product['quantity'] < 1 and not zakaz and zakaz_price_null) %} 
									<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
								{% elseif (product['quantity'] < 1 and zakaz and not zakaz_price_null) %} 
									<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
								{% elseif (product['quantity'] < 1 and zakaz and zakaz_price_null) %} 
									<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
								{% endif %} 
							{% endif %} 
							{% if (product['stiker_upc']) %} 
								<span class="stiker stiker_user">{{ product['stiker_upc'] }}</span>
							{% endif %} 
							{% if (product['stiker_ean']) %} 
								<span class="stiker stiker_user">{{ product['stiker_ean'] }}</span>
							{% endif %} 
							{% if (product['stiker_jan']) %} 
								<span class="stiker stiker_user">{{ product['stiker_jan'] }}</span>
							{% endif %} 
							{% if (product['stiker_isbn']) %} 
								<span class="stiker stiker_user">{{ product['stiker_isbn'] }}</span>
							{% endif %} 
							{% if (product['stiker_mpn']) %} 
								<span class="stiker stiker_user">{{ product['stiker_mpn'] }}</span>
							{% endif %} 
						</div>
					{% endif %} 
					{% if (revpopuporder or popup_view or ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod'])) %} 
						<div class="fapanel {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'rev_wish_srav_prod' }} {% endif %}">		
							{% if ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod']) %} 
								{% if (rev_wish_prod) %} 
									<div class="wishlist">
										<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
									</div>
								{% endif %} 
								{% if (rev_srav_prod) %} 
									<div class="compare">
										<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
									</div>
								{% endif %} 
							{% endif %} 
							{% if (popup_view) %} 
								<div class="lupa">
									<a onclick="get_revpopup_view('{{ product['product_id'] }}');"><i data-toggle="tooltip" {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'data-placement="left"' }} {% endif %} title="{{ text_catalog_revpopup_view }}" class='fa fa-border fa-eye'></i></a>
								</div>
							{% endif %} 
							{% if (product['quantity'] > 0 or zakaz) %} 
								{% if (revpopuporder) %} 
									{% if (product['price_number'] > 0 or zakaz_price_null) %} 
										<div class="zakaz">
											<a onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i data-toggle="tooltip" {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'data-placement="left"' }} {% endif %} title="{{ text_catalog_revpopup_purchase }}" class='fa fa-border fa-gavel'></i></a>
										</div>
									{% endif %} 
								{% endif %} 
							{% endif %} 
						</div>
					{% endif %} 
				</div>
				<div class="caption product-info clearfix">
					<h4><a href="{{ product['href'] }}">{{ product['name'] }}</a></h4>
					{% if (product['rating']) %} 
					<div class="rating">
					  {% set i = 1 %}{% for i in i..5 %} 
					  {% if (product['rating'] < i) %} 
					  <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
					  {% else %} 
					  <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
					  {% endif %} 
					  {% endfor %} 
					</div>
					{% endif %} 
					
					<div class="description_options">
						<div class="description {{ product['options'] and product['options_buy'] ? 'description_options_buy_price' : '' }}">
							{% if (description_options['short_desc'] and product['short_description']) %} 
								<div class="short_description">{{ product['short_description'] }}</div>
							{% endif %} 
							{{ product['description'] }} 
							{% if (not description_options['zamena_description']) %}<span class="hidden pr_quantity_{{ product['product_id'] }}"></span>{% endif %} 
						</div>
						{% if (revtheme_product_all['options_buy'] and product['options'] and product['options_buy']) %} 
							<div class="well well-sm product-info options_buy">
								<div id="option_{{ product['product_id'] }}" class="options">
									<div class="form-group">
										{% if (revtheme_product_all['options_buy_optionname_one']) %} 
											<label class="control-label options_buy_label">{% for option in product['options'] %}{{ option['name'] }}:{% endfor %}</label>
										{% else %} 
											<label class="control-label options_buy_label">{{ text_option_option }}:</label>
										{% endif %} 
										<select class="form-control" onchange="get_product_option_id_product_products('{{ product['product_id'] }}')" name="" id="product_products_soption_{{ product['product_id'] }}">
												{% for option in product['options'] %} 
													{% if (revtheme_product_all['options_buy_optionname']) %} 
														<optgroup label="{{ option['name'] }}:" >
													{% endif %} 
													{% for option_value in option['product_option_value'] %} 
														{% if (option_value['price'] > 0 and option_value['quantity'] > 0) %} 
															<option product_option_id="{{ option['product_option_id'] }}" value="{{ option_value['product_option_value_id'] }}">{{ option_value['name'] }} 
															{% if (opt_price) %} 
																{% if (option_value['price']) %} 
																<span class="option_price">({{ option_value['price_prefix'] }}{{ option_value['price'] }})</span>
																{% endif %} 
															{% endif %} 
															</option>
														{% endif %} 
													{% endfor %} 
													{% if (revtheme_product_all['options_buy_optionname']) %} 
														</optgroup>
													{% endif %} 
												{% endfor %} 
										</select>
									</div>
								</div>
							</div>
							<script><!--
							$('#product_products select.form-control option:nth-child(1)').attr('selected', 'selected');
							$( document ).ready(function() {
								get_product_option_id_product_products ({{ product['product_id'] }});
							});
							function get_product_option_id_product_products (product_id) {
								var sel_option_id = document.getElementById('product_products_soption_'+product_id);
								var option_id = sel_option_id.options[sel_option_id.selectedIndex].getAttribute('product_option_id');
								sel_option_id.setAttribute('name', 'option['+option_id+']');
								update_prices_product_product_products(product_id,1);
							}
							--></script>
						{% elseif (product['options']) %} 
							<div class="well well-sm product-info">
								<div id="option_{{ product['product_id'] }}" class="options">
								{% for option in product['options'] %} 
									{% if (option['type'] == 'select') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
											<label class="control-label" for="product_products_input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
											<select onchange="update_prices_product_product_products({{ product['product_id'] }},{{ product['minimum'] }});" name="option[{{ option['product_option_id'] }}]" id="product_products_input-option{{ option['product_option_id'] }}" class="form-control">
												<option value="">{{ text_select }}</option>
												{% for option_value in option['product_option_value'] %} 
													<option value="{{ option_value['product_option_value_id'] }}">{{ option_value['name'] }} 
														{% if (opt_price) %} 
															{% if (option_value['price']) %} 
																<span class="option_price">({{ option_value['price_prefix'] }}{{ option_value['price'] }})</span>
															{% endif %} 
														{% endif %} 
													</option>
												{% endfor %} 
											</select>
										</div>
									{% endif %} 
									{% if (option['type'] == 'radio') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
											<label class="control-label">{{ option['name'] }}:</label>
											<div id="input-option{{ option['product_option_id'] }}">
												{% for option_value in option['product_option_value'] %} 
													<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
														<input onchange="update_prices_product_product_products({{ product['product_id'] }},{{ product['minimum'] }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
														<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
															{% if (option_value['image']) %} 
																<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
															{% else %} 
																<span>{{ option_value['name'] }}</span>
															{% endif %} 
															{% if (option_value['price']) %} 
																<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
															{% endif %} 
															<i class="fa fa-check"></i>	
														</label>
													</div>
												{% endfor %} 
											</div>
										</div>
									{% endif %} 
									{% if (option['type'] == 'checkbox') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
											<label class="control-label">{{ option['name'] }}:</label>
											<div id="input-option{{ option['product_option_id'] }}">
												{% for option_value in option['product_option_value'] %} 
													<div class="radio checkbox{% if (option['opt_image']) %} opt_with_img{% endif %}">
														<input onchange="update_prices_product_product_products({{ product['product_id'] }},{{ product['minimum'] }});" type="checkbox" name="option[{{ option['product_option_id'] }}][]" value="{{ option_value['product_option_value_id'] }}" id="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
														<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
															{% if (option_value['image']) %} 
																<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
															{% else %} 
																<span>{{ option_value['name'] }}</span>
															{% endif %} 
															{% if (option_value['price']) %} 
																<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
															{% endif %} 
															<i class="fa fa-check"></i>
														</label>
													</div>
												{% endfor %} 
											</div>
										</div>
									{% endif %} 
									{% if (option['type'] == 'image') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
											<label class="control-label">{{ option['name'] }}:</label>
											<div id="input-option{{ option['product_option_id'] }}">
												{% for option_value in option['product_option_value'] %} 
													<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
														<input onchange="update_prices_product_product_products({{ product['product_id'] }},{{ product['minimum'] }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
														<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
															{% if (option_value['image']) %} 
																<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
															{% else %} 
																<span>{{ option_value['name'] }}</span>
															{% endif %} 
															{% if (option_value['price']) %} 
																<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
															{% endif %} 
															<i class="fa fa-check"></i>	
														</label>
													</div>
												{% endfor %} 
											</div>
										</div>
									{% endif %} 
									{% if (option['type'] == 'text') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
										  <input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control" />
										</div>
									{% endif %} 
									{% if (option['type'] == 'textarea') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
										  <textarea name="option[{{ option['product_option_id'] }}]" rows="5" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control">{{ option['value'] }}</textarea>
										</div>
									{% endif %} 
									{% if (option['type'] == 'file') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label">{{ option['name'] }}:</label>
										  <button type="button" id="button-upload{{ option['product_option_id'] }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
										  <input type="hidden" name="option[{{ option['product_option_id'] }}]" value="" id="input-option{{ option['product_option_id'] }}" />
										</div>
									{% endif %} 
									{% if (option['type'] == 'date') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
										  <div class="input-group date">
											<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD" id="input-option{{ option['product_option_id'] }}" class="form-control" />
											<span class="input-group-btn">
											<button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
											</span></div>
										</div>
									{% endif %} 
									{% if (option['type'] == 'datetime') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
										  <div class="input-group datetime">
											<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
											<span class="input-group-btn">
											<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
											</span></div>
										</div>
									{% endif %} 
									{% if (option['type'] == 'time') %} 
										<div class="form-group{{ option['required'] ? ' required' : '' }}">
										  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
										  <div class="input-group time">
											<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
											<span class="input-group-btn">
											<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
											</span></div>
										</div>
									{% endif %} 
								{% endfor %} 
								</div>
							</div>
						{% endif %} 
					</div>
					<div class="product_buttons">
						{% if (revpopuporder or popup_view or ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod'])) %} 
							<div class="fapanel-price">
								{% if (product['quantity'] > 0 or zakaz) %} 
									{% if (revpopuporder) %} 
										{% if (product['price_number'] > 0 or zakaz_price_null) %} 
											<div class="zakaz">
												<a onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="top" title="{{ text_catalog_revpopup_purchase }}" class='fa fa-border fa-gavel'></i></a>
											</div>
										{% endif %} 
									{% endif %} 
								{% endif %} 
								{% if (popup_view) %} 
									<div class="lupa">
										<a onclick="get_revpopup_view('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="top" title="{{ text_catalog_revpopup_view }}" class='fa fa-border fa-eye'></i></a>
									</div>
								{% endif %} 
								{% if ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod']) %} 
								{% if (rev_srav_prod) %} 
									<div class="compare">
										<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
									</div>
								{% endif %} 
								{% if (rev_wish_prod) %} 
									<div class="wishlist">
										<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
									</div>
								{% endif %} 
							{% endif %} 
							</div>
						{% endif %} 
						{% if (product['price']) %} 
							{% if (product['price_number'] > 0) %} 
								{% if (product['quantity'] > 0 or zakaz) %} 
									<div class="price">
									{% if (product['price_number'] > 0 or zakaz_price_null) %} 
										{% if (not product['special']) %} 
											<span class="price_no_format{{ product['product_id'] }}">{{ product['price'] }}</span>
										{% else %} 
											<span class="price-new"><span class="price_no_format{{ product['product_id'] }}">{{ product['special'] }}</span></span>
										{% endif %} 
									{% endif %} 
									</div>
								{% else %} 
									{% if (predzakaz_button) %} 
										<div class="price">
										{% if (product['price_number'] > 0 or zakaz_price_null) %} 
											{% if (not product['special']) %} 
												<span class="price_no_format{{ product['product_id'] }}">{{ product['price'] }}</span>
											{% else %} 
												<span class="price-new"><span class="price_no_format{{ product['product_id'] }}">{{ product['special'] }}</span></span>
											{% endif %} 
										{% endif %} 
										</div>
									{% else %} 
										<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
									{% endif %} 
								{% endif %} 
								{% if (ch_quantity and (product['price_number'] > 0 or zakaz_price_null) and (product['quantity'] > 0 or zakaz)) %} 
									<div class="number">
										<div class="frame-change-count">
											<div class="btn-plus">
												<button type="button" onclick="validate_pole_product_products(this,{{ product['product_id'] }},'+',{{ product['minimum'] }},{{ product['quantity'] }});">+</button>
											</div>
											<div class="btn-minus">
												<button type="button" onclick="validate_pole_product_products(this,{{ product['product_id'] }},'-',{{ product['minimum'] }},{{ product['quantity'] }});">-</button>
											</div>
										</div>
										<input type="text" name="quantity" class="plus-minus" value='{{ product['minimum'] }}' onchange="validate_pole_product_products(this);" onkeyup="validate_pole_product_products(this,{{ product['product_id'] }},'=',{{ product['minimum'] }},{{ product['quantity'] }});">
									</div>
								{% else %} 
									<div class="number bordnone"></div>
									<input type="hidden" name="quantity" class="plus-minus" value='{{ product['minimum'] }}'>
								{% endif %} 
								<div class="clearfix"></div>
							{% else %} 
								{% if (zakaz or zakaz_price_null) %} 
									<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
									{% if (product['price_number'] == 0 and not zakaz_price_null) %} 
									{% elseif (product['quantity'] > 0 or zakaz) %} 
										<div class="price_na_zakaz">{{ text_catalog_price_na_zakaz }}</div>
									{% endif %} 
								{% else %} 
									<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
								{% endif %} 
							{% endif %} 
						{% endif %} 
						{% if ((rev_srav_prod or rev_wish_prod) and not setting_catalog_all['rev_wish_srav_prod']) %} 
							{% if (rev_srav_prod) %} 
								<div class="compare">
									<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
								</div>
							{% endif %} 
							{% if (rev_wish_prod) %} 
								<div class="wishlist">
									<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
								</div>
							{% endif %} 
						{% set button_cart_class = 'prlistb' %} {% else %} {% set button_cart_class = 'prlistb active' %} {% endif %}
						{% if (product['quantity'] > 0 or zakaz or predzakaz_button) %} 
							{% if (product['price_number'] > 0 or zakaz_price_null) %} 
								{% if (product['quantity'] < 1 and predzakaz_button) %} 
									<div class="cart predzakaz_cart">
										<a onclick="get_revpopup_predzakaz({{ product['product_id'] }});" {% if (button_cart_class != 'prlistb active') %}data-toggle="tooltip" title="{{ text_predzakaz }}"{% endif %}><i class="fa fa-border fa-shopping-basket predzakaz"><span class="{{ button_cart_class }}">{{ text_predzakaz }}</span></i></a>
									</div>
								{% else %} 
									<div class="cart">
										<a onclick="get_revpopup_cart({{ product['product_id'] }},'module_in_product',get_revpopup_cart_quantity_product_products('{{ product['product_id'] }}'),'product_products');" {% if (button_cart_class != 'prlistb active') %}data-toggle="tooltip" title="{{ button_cart }}"{% endif %}><i class="fa fa-border fa-shopping-basket"><span class="{{ button_cart_class }}">{{ button_cart }}</span></i></a>
									</div>
									{% if (revpopuporder_settings['quick_btn']) %} 
										<a class="quick_btn btn btn-default btn-xs pull-right" onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i class="fa fa-hand-pointer-o"></i>{{ text_catalog_revpopup_purchase }}</a>
									{% endif %} 
								{% endif %} 
							{% endif %} 
						{% endif %} 
					</div>
				</div>
					
			  </div>
			</div>
        {% endfor %} 
      </div>
	  </div>
	<script><!--
		$('.product_related').owlCarousel({
			responsiveBaseWidth: '.product_related',
			{% if (chislo_ryad) %} 
				{% if (setting_all_settings['mobil_two']) %} 
					itemsCustom: [[0, 1], [294, 2], [375, 2], [750, 3], [970, 4], [1170, 4]],
				{% else %} 
					itemsCustom: [[0, 1], [375, 1], [750, 3], [970, 4], [1170, 4]],
				{% endif %} 
			{% else %} 
				{% if (setting_all_settings['mobil_two']) %} 
					itemsCustom: [[0, 1], [294, 2], [375, 2], [750, 3], [970, 4], [980, 5]],
				{% else %} 
					itemsCustom: [[0, 1], [375, 1], [750, 3], [970, 4], [980, 5]],
				{% endif %} 
			{% endif %} 
			mouseDrag: true,
			navigation: true,
			navigationText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
			pagination: true
		});
		
		{% for product in products %} {% if (product['minimum'] > 1 and recalc_price) %} 
			update_quantity_product_products({{ product['product_id'] }}, {{ product['minimum'] }});
		{% endif %} {% endfor %} 
		function get_revpopup_cart_quantity_product_products(product_id) {
			input_val = $('#product_products .product_'+product_id+' .plus-minus').val();
			quantity  = parseInt(input_val);
			return quantity;
		}
		function validate_pole_product_products(val, product_id, znak, minimumvalue, maximumvalue) {
			val.value = val.value.replace(/[^\d,]/g, '');
			if (val.value == '') val.value = minimumvalue;
			maximumvalue = Number($('#product_products .pr_quantity_'+product_id).text());
			if (maximumvalue < 1) maximumvalue = 9999;
			input_val = $('#product_products .product_'+product_id+' .plus-minus');	
			quantity = parseInt(input_val.val());
			{% if (q_zavisimost) %} 
			if(znak=='+' && input_val.val() < maximumvalue) input_val.val(quantity+1);
			else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
			else if(znak=='=' && input_val.val() < maximumvalue && input_val.val() < maximumvalue) input_val.val(input_val.val());
			if (quantity < 1 || quantity < minimumvalue) {
				input_val.val(minimumvalue);
				val.value = minimumvalue;
			} else if (quantity > maximumvalue) {
				input_val.val(maximumvalue);
				val.value = maximumvalue;
			}
			{% else %} 
			if(znak=='+') input_val.val(quantity+1);
			else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
			else if(znak=='=' && input_val.val() > minimumvalue) input_val.val(input_val.val());
			if (quantity < 1 || quantity < minimumvalue) {
				input_val.val(minimumvalue);
				val.value = minimumvalue;
			}
			{% endif %} 
			update_quantity_product_products(product_id, input_val.val());
		}
		function update_quantity_product_products(product_id, quantity) {
			{% if (recalc_price) %} 
				quantity = quantity;
			{% else %} 
				quantity = 1;
			{% endif %} 
			
			data = $('#product_products .product_'+product_id+' .options input[type=\'text\'], #product_products .product_'+product_id+' .options input[type=\'hidden\'], #product_products .product_'+product_id+' .options input[type=\'radio\']:checked, #product_products .product_'+product_id+' .options input[type=\'checkbox\']:checked, #product_products .product_'+product_id+' .options select');
			$.ajax({
			  url: 'index.php?route=product/product/update_prices',
			  type: 'post',
			  dataType: 'json',
			  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
			  success: function(json) {
				{% if (recalc_price) %} 
				
					{% if (description_options['zamena_description'] and description_options['weight']) %} 
						var weight = json['weight'];
						{% if (revtheme_product_all['recalc_price_animate']) %} 
							var start_weight = parseFloat($('#product_products .pr_weight_'+product_id).attr('data-weight'));
							$({val:start_weight}).animate({val:weight}, {
								duration: 500,
								easing: 'swing',
								step: function(val) {
									$('#product_products .pr_weight_'+product_id).html(weight_format(val, product_id));
								}
							});
							$('#product_products .pr_weight_'+product_id).attr('data-weight', json['weight']);
						{% else %} 
							$('#product_products .pr_weight_'+product_id).html(weight_format(weight, product_id));
						{% endif %} 
					{% endif %} 

					{% if (stikers_status) %} 
						var price = json['price_n'];
						{% if (revtheme_product_all['recalc_price_animate']) %} 
							var start_price = parseFloat($('#product_products .special_no_format'+product_id).html().replace(/\s*/g,''));
							$({val:start_price}).animate({val:price}, {
								duration: 500,
								easing: 'swing',
								step: function(val) {
									$('#product_products .special_no_format'+product_id).html(price_format(val));
								}
							});
						{% else %} 
							$('#product_products .special_no_format'+product_id).html(price_format(price));
						{% endif %} 
					{% endif %} 
					
					var special = json['special_n'];
					{% if (revtheme_product_all['recalc_price_animate']) %} 
						var start_special = parseFloat($('#product_products .price_no_format'+product_id).html().replace(/\s*/g,''));
						$({val:start_special}).animate({val:special}, {
							duration: 500,
							easing: 'swing',
							step: function(val) {
								$('#product_products .price_no_format'+product_id).html(price_format(val));
							}
						});
					{% else %} 
						$('#product_products .price_no_format'+product_id).html(price_format(special));
					{% endif %} 
					
				{% endif %} 
			  }
			});
		}
		function update_prices_product_product_products(product_id, minimumvalue) {
			input_val = $('#product_products .product_'+product_id+' .plus-minus').val();
			if (input_val > minimumvalue) {
				input_val = minimumvalue;
				$('#product_products .product_'+product_id+' .plus-minus').val(minimumvalue);
			}
			{% if (recalc_price) %} 
			quantity = parseInt(input_val);
			{% else %} 
			quantity = 1;
			{% endif %} 
			data = $('#product_products .product_'+product_id+' .options input[type=\'text\'], #product_products .product_'+product_id+' .options input[type=\'hidden\'], #product_products .product_'+product_id+' .options input[type=\'radio\']:checked, #product_products .product_'+product_id+' .options input[type=\'checkbox\']:checked, #product_products .product_'+product_id+' .options select');
			$.ajax({
			  type: 'post',
			  url:  'index.php?route=product/product/update_prices',
			  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
			  dataType: 'json',
			  success: function(json) {
			  
				{% if (img_slider) %} 
				$('#product_products .product_'+product_id+' .image .owl-item:first-child img').attr('src', json['opt_image']);
				{% else %} 
				$('#product_products .product_'+product_id+' .image img').attr('src', json['opt_image']);
				{% endif %} 
				
				{% if (description_options['zamena_description'] and description_options['model']) %} 
				$('#product_products .product_'+product_id+' .pr_model_'+product_id).html(json['opt_model']);
				{% endif %} 
			  
				var end_quantity = json['option_quantity'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_quantity = parseFloat($('#product_products .pr_quantity_'+product_id).html().replace(/\s*/g,''));
					$({val:start_quantity}).animate({val:end_quantity}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('#product_products .pr_quantity_'+product_id).html(number_format(val, product_id));
						}
					});
				{% else %} 
					$('#product_products .pr_quantity_'+product_id).html(number_format(end_quantity, product_id));
				{% endif %} 
				
				{% if (description_options['zamena_description'] and description_options['weight']) %} 
					var weight = json['weight'];
					{% if (revtheme_product_all['recalc_price_animate']) %} 
						var start_weight = parseFloat($('#product_products .pr_weight_'+product_id).attr('data-weight'));
						$({val:start_weight}).animate({val:weight}, {
							duration: 500,
							easing: 'swing',
							step: function(val) {
								$('#product_products .pr_weight_'+product_id).html(weight_format(val, product_id));
							}
						});
						$('#product_products .pr_weight_'+product_id).attr('data-weight', json['weight']);
					{% else %} 
						$('#product_products .pr_weight_'+product_id).html(weight_format(weight, product_id));
					{% endif %} 
				{% endif %} 
			  
				{% if (stikers_status) %} 
					var price = json['price_n'];
					{% if (revtheme_product_all['recalc_price_animate']) %} 
						var start_price = parseFloat($('#product_products .special_no_format'+product_id).html().replace(/\s*/g,''));
						$({val:start_price}).animate({val:price}, {
							duration: 500,
							easing: 'swing',
							step: function(val) {
								$('#product_products .special_no_format'+product_id).html(price_format(val));
							}
						});
					{% else %} 
						$('#product_products .special_no_format'+product_id).html(price_format(price));
					{% endif %} 
				{% endif %} 
				
				var special = json['special_n'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_special = parseFloat($('#product_products .price_no_format'+product_id).html().replace(/\s*/g,''));
					$({val:start_special}).animate({val:special}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('#product_products .price_no_format'+product_id).html(price_format(val));
						}
					});
				{% else %} 
					$('#product_products .price_no_format'+product_id).html(price_format(special));
				{% endif %} 

			  }
			});
		}
		var product_grid_width = $('.product-layout .product-thumb').outerWidth();
		if (product_grid_width < 240) {
			$('.product-layout').addClass('new_line');
		} else {
			$('.product-layout').removeClass('new_line');
		}
		max_height_div('#product_products .product-thumb h4');
		$('#product_products .product-thumb .description_options').css('min-height', 'initial');
		max_height_div('#product_products .product-thumb .description_options');
		max_height_div('#product_products .product-thumb .price');
		max_height_div('#product_products .product-thumb .number');
		max_height_div('#product_products .product-thumb .product_buttons');
		function max_height_div(div) {
			var maxheight = 0;
			$(div).each(function(){
				$(this).removeAttr('style');
				if($(this).height() > maxheight) {
					maxheight = $(this).height();
				}
			});
			$(div).height(maxheight);
		}
	//--></script>
	</div>
      {% endif %} 
	{% if (viewed_products) %} 
		<div id="product_products2" class="rev_slider">
			<div class="heading_h"><h3>{{ viewed_products_zagolovok }}</h3></div>
			<div class="row">
				<div class="viewed_products">
					{% for product in viewed_products %} 
						<div class="product-layout col-lg-12 item">
						  <div class="product-thumb product_{{ product['product_id'] }}">
							<div class="image">
								{% if (product['product_in_cart']) %} 
									<div class="pr_in_cart_i"><i class="fa fa-check"></i></div>
								{% endif %} 
								{% if (img_slider) %}		
									<div class="image owl-carousel owlproduct">
										<div class="item text-center">
											<a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" /></a>
										</div>			
										{% if (product['images']) %} 
											{% for image in product['images'] %} 
												<!--noindex-->
												<div class="item text-center">
													<a href="{{ product['href'] }}"><img src="{{ image['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" rel="nofollow" /></a>
												</div>
												<!--/noindex-->
											{% endfor %} 
										{% endif %} 
									</div>
								{% else %} 
									<a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if ((product['quantity'] < 1 and not zakaz) or (product['price_number'] == 0 and not zakaz_price_null)) %}zatemnenie_img{% endif %}" /></a>
								{% endif %} 
								{% if (stikers_status) %} 
									<div class="stiker_panel">
										{% if ((product['quantity'] > 0 and product['price_number'] != 0) or zakaz) %} 
											{% if (product['stiker_spec']) %} 
												{% if (product['special']) %} 
													<span class="stiker stiker_spec"><span class="price-old special_no_format{{ product['product_id'] }}">{{ product['price'] }}</span></span>
												{% else %} 
													<span class="hidden special_no_format{{ product['product_id'] }}"></span>
												{% endif %} 
											{% else %} 
												<span class="hidden special_no_format{{ product['product_id'] }}"></span>
											{% endif %} 
										{% else %} 
											<span class="special_no_format{{ product['product_id'] }}" style="display:none"></span>
										{% endif %} 
										{% if (product['stiker_best']) %} 
											<span class="stiker stiker_best">{{ text_catalog_stiker_best }}</span>
										{% endif %} 
										{% if (product['stiker_last']) %} 
											<span class="stiker stiker_last">{{ text_catalog_stiker_last }}</span>
										{% endif %} 
										{% if (product['stiker_sklad_status']) %} 
											<span class="stiker stiker_netu">{{ product['stiker_sklad_status'] }}</span>
										{% elseif (product['stiker_stock']) %} 
											{% if (product['price_number'] == 0 and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ text_catalog_stiker_netu_2 }}</span>
											{% elseif (product['quantity'] < 1 and product['price_number'] > 0 and not zakaz) %} 
												<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
											{% elseif (product['quantity'] < 1 and not zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
											{% elseif (product['quantity'] < 1 and zakaz and not zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
											{% elseif (product['quantity'] < 1 and zakaz and zakaz_price_null) %} 
												<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
											{% endif %} 
										{% endif %} 
										{% if (product['stiker_upc']) %} 
											<span class="stiker stiker_user">{{ product['stiker_upc'] }}</span>
										{% endif %} 
										{% if (product['stiker_ean']) %} 
											<span class="stiker stiker_user">{{ product['stiker_ean'] }}</span>
										{% endif %} 
										{% if (product['stiker_jan']) %} 
											<span class="stiker stiker_user">{{ product['stiker_jan'] }}</span>
										{% endif %} 
										{% if (product['stiker_isbn']) %} 
											<span class="stiker stiker_user">{{ product['stiker_isbn'] }}</span>
										{% endif %} 
										{% if (product['stiker_mpn']) %} 
											<span class="stiker stiker_user">{{ product['stiker_mpn'] }}</span>
										{% endif %} 
									</div>
								{% endif %} 
								{% if (revpopuporder or popup_view or ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod'])) %} 
									<div class="fapanel {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'rev_wish_srav_prod' }} {% endif %}">		
										{% if ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod']) %} 
											{% if (rev_wish_prod) %} 
												<div class="wishlist">
													<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
												</div>
											{% endif %} 
											{% if (rev_srav_prod) %} 
												<div class="compare">
													<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
												</div>
											{% endif %} 
										{% endif %} 
										{% if (popup_view) %} 
											<div class="lupa">
												<a onclick="get_revpopup_view('{{ product['product_id'] }}');"><i data-toggle="tooltip" {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'data-placement="left"' }} {% endif %} title="{{ text_catalog_revpopup_view }}" class='fa fa-border fa-eye'></i></a>
											</div>
										{% endif %} 
										{% if (product['quantity'] > 0 or zakaz) %} 
											{% if (revpopuporder) %} 
												{% if (product['price_number'] > 0 or zakaz_price_null) %} 
													<div class="zakaz">
														<a onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i data-toggle="tooltip" {% if (not setting_catalog_all['rev_wish_srav_prod']) %} {{ 'data-placement="left"' }} {% endif %} title="{{ text_catalog_revpopup_purchase }}" class='fa fa-border fa-gavel'></i></a>
													</div>
												{% endif %} 
											{% endif %} 
										{% endif %} 
									</div>
								{% endif %} 
							</div>
							<div class="caption product-info clearfix">
								<h4><a href="{{ product['href'] }}">{{ product['name'] }}</a></h4>
								{% if (product['rating']) %} 
								<div class="rating">
								  {% set i = 1 %}{% for i in i..5 %} 
								  {% if (product['rating'] < i) %} 
								  <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
								  {% else %} 
								  <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
								  {% endif %} 
								  {% endfor %} 
								</div>
								{% endif %} 
								
								<div class="description_options">
									<div class="description {{ product['options'] and product['options_buy'] ? 'description_options_buy_price' : '' }}">
										{% if (description_options['short_desc'] and product['short_description']) %} 
											<div class="short_description">{{ product['short_description'] }}</div>
										{% endif %} 
										{{ product['description'] }} 
										{% if (not description_options['zamena_description']) %}<span class="hidden pr_quantity_{{ product['product_id'] }}"></span>{% endif %} 
									</div>
									{% if (revtheme_product_all['options_buy'] and product['options'] and product['options_buy']) %} 
										<div class="well well-sm product-info options_buy">
											<div id="option_{{ product['product_id'] }}" class="options">
												<div class="form-group">
													{% if (revtheme_product_all['options_buy_optionname_one']) %} 
														<label class="control-label options_buy_label">{% for option in product['options'] %}{{ option['name'] }}:{% endfor %}</label>
													{% else %} 
														<label class="control-label options_buy_label">{{ text_option_option }}:</label>
													{% endif %} 
													<select class="form-control" onchange="get_product_option_id_product_products2('{{ product['product_id'] }}')" name="" id="product_products2_soption_{{ product['product_id'] }}">
															{% for option in product['options'] %} 
																{% if (revtheme_product_all['options_buy_optionname']) %} 
																	<optgroup label="{{ option['name'] }}:" >
																{% endif %} 
																{% for option_value in option['product_option_value'] %} 
																	{% if (option_value['price'] > 0 and option_value['quantity'] > 0) %} 
																		<option product_option_id="{{ option['product_option_id'] }}" value="{{ option_value['product_option_value_id'] }}">{{ option_value['name'] }} 
																		{% if (opt_price) %} 
																			{% if (option_value['price']) %} 
																			<span class="option_price">({{ option_value['price_prefix'] }}{{ option_value['price'] }})</span>
																			{% endif %} 
																		{% endif %} 
																		</option>
																	{% endif %} 
																{% endfor %} 
																{% if (revtheme_product_all['options_buy_optionname']) %} 
																	</optgroup>
																{% endif %} 
															{% endfor %} 
													</select>
												</div>
											</div>
										</div>
										<script><!--
										$('#product_products2 select.form-control option:nth-child(1)').attr('selected', 'selected');
										$( document ).ready(function() {
											get_product_option_id_product_products2 ({{ product['product_id'] }});
										});
										function get_product_option_id_product_products2 (product_id) {
											var sel_option_id = document.getElementById('product_products2_soption_'+product_id);
											var option_id = sel_option_id.options[sel_option_id.selectedIndex].getAttribute('product_option_id');
											sel_option_id.setAttribute('name', 'option['+option_id+']');
											update_prices_product_product_products2(product_id,1);
										}
										--></script>
									{% elseif (product['options']) %} 
										<div class="well well-sm product-info">
											<div id="option_{{ product['product_id'] }}" class="options">
											{% for option in product['options'] %} 
												{% if (option['type'] == 'select') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
														<label class="control-label" for="product_products2_input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
														<select onchange="update_prices_product_product_products2({{ product['product_id'] }},{{ product['minimum'] }});" name="option[{{ option['product_option_id'] }}]" id="product_products2_input-option{{ option['product_option_id'] }}" class="form-control">
															<option value="">{{ text_select }}</option>
															{% for option_value in option['product_option_value'] %} 
																<option value="{{ option_value['product_option_value_id'] }}">{{ option_value['name'] }} 
																	{% if (opt_price) %} 
																		{% if (option_value['price']) %} 
																			<span class="option_price">({{ option_value['price_prefix'] }}{{ option_value['price'] }})</span>
																		{% endif %} 
																	{% endif %} 
																</option>
															{% endfor %} 
														</select>
													</div>
												{% endif %} 
												{% if (option['type'] == 'radio') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
														<label class="control-label">{{ option['name'] }}:</label>
														<div id="input-option{{ option['product_option_id'] }}">
															{% for option_value in option['product_option_value'] %} 
																<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
																	<input onchange="update_prices_product_product_products2({{ product['product_id'] }},{{ product['minimum'] }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
																	<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
																		{% if (option_value['image']) %} 
																			<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
																		{% else %} 
																			<span>{{ option_value['name'] }}</span>
																		{% endif %} 
																		{% if (option_value['price']) %} 
																			<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
																		{% endif %} 
																		<i class="fa fa-check"></i>	
																	</label>
																</div>
															{% endfor %} 
														</div>
													</div>
												{% endif %} 
												{% if (option['type'] == 'checkbox') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
														<label class="control-label">{{ option['name'] }}:</label>
														<div id="input-option{{ option['product_option_id'] }}">
															{% for option_value in option['product_option_value'] %} 
																<div class="radio checkbox{% if (option['opt_image']) %} opt_with_img{% endif %}">
																	<input onchange="update_prices_product_product_products2({{ product['product_id'] }},{{ product['minimum'] }});" type="checkbox" name="option[{{ option['product_option_id'] }}][]" value="{{ option_value['product_option_value_id'] }}" id="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
																	<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
																		{% if (option_value['image']) %} 
																			<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
																		{% else %} 
																			<span>{{ option_value['name'] }}</span>
																		{% endif %} 
																		{% if (option_value['price']) %} 
																			<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
																		{% endif %} 
																		<i class="fa fa-check"></i>
																	</label>
																</div>
															{% endfor %} 
														</div>
													</div>
												{% endif %} 
												{% if (option['type'] == 'image') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
														<label class="control-label">{{ option['name'] }}:</label>
														<div id="input-option{{ option['product_option_id'] }}">
															{% for option_value in option['product_option_value'] %} 
																<div class="radio{% if (option['opt_image']) %} opt_with_img{% endif %}">
																	<input onchange="update_prices_product_product_products2({{ product['product_id'] }},{{ product['minimum'] }});" type="radio" name="option[{{ option['product_option_id'] }}]" value="{{ option_value['product_option_value_id'] }}" id="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}" />
																	<label {% if (option['opt_image']) %}data-toggle="tooltip" title="{{ option_value['name'] }}"{% endif %} class="btn btn-default {% if (option_value['image']) %}label-in-img{% endif %}" for="product_products2_{{ option['product_option_id'] }}_{{ option_value['product_option_value_id'] }}">
																		{% if (option_value['image']) %} 
																			<img src="{{ option_value['image'] }}" alt="{{ option_value['name'] ~ option_value['price'] ? ' ' ~ option_value['price_prefix'] ~ option_value['price'] : '' }}" class="img-thumbnail" /> {% if (not option['opt_image']) %}{{ option_value['name'] }}{% endif %} 
																		{% else %} 
																			<span>{{ option_value['name'] }}</span>
																		{% endif %} 
																		{% if (option_value['price']) %} 
																			<span class="option_price">{{ option_value['price_prefix'] }}{{ option_value['price'] }}</span>
																		{% endif %} 
																		<i class="fa fa-check"></i>	
																	</label>
																</div>
															{% endfor %} 
														</div>
													</div>
												{% endif %} 
												{% if (option['type'] == 'text') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
													  <input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control" />
													</div>
												{% endif %} 
												{% if (option['type'] == 'textarea') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
													  <textarea name="option[{{ option['product_option_id'] }}]" rows="5" placeholder="{{ option['name'] }}" id="input-option{{ option['product_option_id'] }}" class="form-control">{{ option['value'] }}</textarea>
													</div>
												{% endif %} 
												{% if (option['type'] == 'file') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label">{{ option['name'] }}:</label>
													  <button type="button" id="button-upload{{ option['product_option_id'] }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
													  <input type="hidden" name="option[{{ option['product_option_id'] }}]" value="" id="input-option{{ option['product_option_id'] }}" />
													</div>
												{% endif %} 
												{% if (option['type'] == 'date') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
													  <div class="input-group date">
														<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD" id="input-option{{ option['product_option_id'] }}" class="form-control" />
														<span class="input-group-btn">
														<button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
														</span></div>
													</div>
												{% endif %} 
												{% if (option['type'] == 'datetime') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
													  <div class="input-group datetime">
														<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
														<span class="input-group-btn">
														<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
														</span></div>
													</div>
												{% endif %} 
												{% if (option['type'] == 'time') %} 
													<div class="form-group{{ option['required'] ? ' required' : '' }}">
													  <label class="control-label" for="input-option{{ option['product_option_id'] }}">{{ option['name'] }}:</label>
													  <div class="input-group time">
														<input type="text" name="option[{{ option['product_option_id'] }}]" value="{{ option['value'] }}" data-date-format="HH:mm" id="input-option{{ option['product_option_id'] }}" class="form-control" />
														<span class="input-group-btn">
														<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
														</span></div>
													</div>
												{% endif %} 
											{% endfor %} 
											</div>
										</div>
									{% endif %} 
								</div>
								<div class="product_buttons">
									{% if (revpopuporder or popup_view or ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod'])) %} 
										<div class="fapanel-price">
											{% if (product['quantity'] > 0 or zakaz) %} 
												{% if (revpopuporder) %} 
													{% if (product['price_number'] > 0 or zakaz_price_null) %} 
														<div class="zakaz">
															<a onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="top" title="{{ text_catalog_revpopup_purchase }}" class='fa fa-border fa-gavel'></i></a>
														</div>
													{% endif %} 
												{% endif %} 
											{% endif %} 
											{% if (popup_view) %} 
												<div class="lupa">
													<a onclick="get_revpopup_view('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="top" title="{{ text_catalog_revpopup_view }}" class='fa fa-border fa-eye'></i></a>
												</div>
											{% endif %} 
											{% if ((rev_srav_prod or rev_wish_prod) and setting_catalog_all['rev_wish_srav_prod']) %} 
											{% if (rev_srav_prod) %} 
												<div class="compare">
													<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
												</div>
											{% endif %} 
											{% if (rev_wish_prod) %} 
												<div class="wishlist">
													<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
												</div>
											{% endif %} 
										{% endif %} 
										</div>
									{% endif %} 
									{% if (product['price']) %} 
										{% if (product['price_number'] > 0) %} 
											{% if (product['quantity'] > 0 or zakaz) %} 
												<div class="price">
												{% if (product['price_number'] > 0 or zakaz_price_null) %} 
													{% if (not product['special']) %} 
														<span class="price_no_format{{ product['product_id'] }}">{{ product['price'] }}</span>
													{% else %} 
														<span class="price-new"><span class="price_no_format{{ product['product_id'] }}">{{ product['special'] }}</span></span>
													{% endif %} 
												{% endif %} 
												</div>
											{% else %} 
												{% if (predzakaz_button) %} 
													<div class="price">
													{% if (product['price_number'] > 0 or zakaz_price_null) %} 
														{% if (not product['special']) %} 
															<span class="price_no_format{{ product['product_id'] }}">{{ product['price'] }}</span>
														{% else %} 
															<span class="price-new"><span class="price_no_format{{ product['product_id'] }}">{{ product['special'] }}</span></span>
														{% endif %} 
													{% endif %} 
													</div>
												{% else %} 
													<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
												{% endif %} 
											{% endif %} 
											{% if (ch_quantity and (product['price_number'] > 0 or zakaz_price_null) and (product['quantity'] > 0 or zakaz)) %} 
												<div class="number">
													<div class="frame-change-count">
														<div class="btn-plus">
															<button type="button" onclick="validate_pole_product_products2(this,{{ product['product_id'] }},'+',{{ product['minimum'] }},{{ product['quantity'] }});">+</button>
														</div>
														<div class="btn-minus">
															<button type="button" onclick="validate_pole_product_products2(this,{{ product['product_id'] }},'-',{{ product['minimum'] }},{{ product['quantity'] }});">-</button>
														</div>
													</div>
													<input type="text" name="quantity" class="plus-minus" value='{{ product['minimum'] }}' onchange="validate_pole_product_products2(this);" onkeyup="validate_pole_product_products2(this,{{ product['product_id'] }},'=',{{ product['minimum'] }},{{ product['quantity'] }});">
												</div>
											{% else %} 
												<div class="number bordnone"></div>
												<input type="hidden" name="quantity" class="plus-minus" value='{{ product['minimum'] }}'>
											{% endif %} 
											<div class="clearfix"></div>
										{% else %} 
											{% if (zakaz or zakaz_price_null) %} 
												<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
												{% if (product['price_number'] == 0 and not zakaz_price_null) %} 
												{% elseif (product['quantity'] > 0 or zakaz) %} 
													<div class="price_na_zakaz">{{ text_catalog_price_na_zakaz }}</div>
												{% endif %} 
											{% else %} 
												<div class="price"><span class="hidden price_no_format{{ product['product_id'] }}"></span></div>
											{% endif %} 
										{% endif %} 
									{% endif %} 
									{% if ((rev_srav_prod or rev_wish_prod) and not setting_catalog_all['rev_wish_srav_prod']) %} 
										{% if (rev_srav_prod) %} 
											<div class="compare">
												<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
											</div>
										{% endif %} 
										{% if (rev_wish_prod) %} 
											<div class="wishlist">
												<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
											</div>
										{% endif %} 
									{% set button_cart_class = 'prlistb' %} {% else %} {% set button_cart_class = 'prlistb active' %} {% endif %}
									{% if (product['quantity'] > 0 or zakaz or predzakaz_button) %} 
										{% if (product['price_number'] > 0 or zakaz_price_null) %} 
											{% if (product['quantity'] < 1 and predzakaz_button) %} 
												<div class="cart predzakaz_cart">
													<a onclick="get_revpopup_predzakaz({{ product['product_id'] }});" {% if (button_cart_class != 'prlistb active') %}data-toggle="tooltip" title="{{ text_predzakaz }}"{% endif %}><i class="fa fa-border fa-shopping-basket predzakaz"><span class="{{ button_cart_class }}">{{ text_predzakaz }}</span></i></a>
												</div>
											{% else %} 
												<div class="cart">
													<a onclick="get_revpopup_cart({{ product['product_id'] }},'module_in_product',get_revpopup_cart_quantity_product_products2('{{ product['product_id'] }}'),'product_products2');" {% if (button_cart_class != 'prlistb active') %}data-toggle="tooltip" title="{{ button_cart }}"{% endif %}><i class="fa fa-border fa-shopping-basket"><span class="{{ button_cart_class }}">{{ button_cart }}</span></i></a>
												</div>
												{% if (revpopuporder_settings['quick_btn']) %} 
													<a class="quick_btn btn btn-default btn-xs pull-right" onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i class="fa fa-hand-pointer-o"></i>{{ text_catalog_revpopup_purchase }}</a>
												{% endif %} 
											{% endif %} 
										{% endif %} 
									{% endif %} 
								</div>
							</div>
						  </div>
						</div>
					{% endfor %} 
				</div>
			</div>
			<script><!--
			$('.viewed_products').owlCarousel({
				responsiveBaseWidth: '.viewed_products',
				{% if (chislo_ryad) %} 
					{% if (setting_all_settings['mobil_two']) %} 
						itemsCustom: [[0, 1], [294, 2], [375, 2], [750, 3], [970, 4], [1170, 4]],
					{% else %} 
						itemsCustom: [[0, 1], [375, 1], [750, 3], [970, 4], [1170, 4]],
					{% endif %} 
				{% else %} 
					{% if (setting_all_settings['mobil_two']) %} 
						itemsCustom: [[0, 1], [294, 2], [375, 2], [750, 3], [970, 4], [980, 5]],
					{% else %} 
						itemsCustom: [[0, 1], [375, 1], [750, 3], [970, 4], [980, 5]],
					{% endif %} 
				{% endif %} 
				mouseDrag: true,
				navigation: true,
				navigationText: ['<i class="fa fa-chevron-left"></i>', '<i class="fa fa-chevron-right"></i>'],
				pagination: true
			});
			
			{% for product in viewed_products %} {% if (product['minimum'] > 1 and recalc_price) %} 
				update_quantity_product_products2({{ product['product_id'] }}, {{ product['minimum'] }});
			{% endif %} {% endfor %} 
			function get_revpopup_cart_quantity_product_products2(product_id) {
				input_val = $('#product_products2 .product_'+product_id+' .plus-minus').val();
				quantity  = parseInt(input_val);
				return quantity;
			}
			function validate_pole_product_products2(val, product_id, znak, minimumvalue, maximumvalue) {
				val.value = val.value.replace(/[^\d,]/g, '');
				if (val.value == '') val.value = minimumvalue;
				maximumvalue = Number($('#product_products2 .pr_quantity_'+product_id).text());
				if (maximumvalue < 1) maximumvalue = 9999;
				input_val = $('#product_products2 .product_'+product_id+' .plus-minus');	
				quantity = parseInt(input_val.val());
				{% if (q_zavisimost) %} 
				if(znak=='+' && input_val.val() < maximumvalue) input_val.val(quantity+1);
				else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
				else if(znak=='=' && input_val.val() < maximumvalue && input_val.val() < maximumvalue) input_val.val(input_val.val());
				if (quantity < 1 || quantity < minimumvalue) {
					input_val.val(minimumvalue);
					val.value = minimumvalue;
				} else if (quantity > maximumvalue) {
					input_val.val(maximumvalue);
					val.value = maximumvalue;
				}
				{% else %} 
				if(znak=='+') input_val.val(quantity+1);
				else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
				else if(znak=='=' && input_val.val() > minimumvalue) input_val.val(input_val.val());
				if (quantity < 1 || quantity < minimumvalue) {
					input_val.val(minimumvalue);
					val.value = minimumvalue;
				}
				{% endif %} 
				update_quantity_product_products2(product_id, input_val.val());
			}
			function update_quantity_product_products2(product_id, quantity) {
				{% if (recalc_price) %} 
					quantity = quantity;
				{% else %} 
					quantity = 1;
				{% endif %} 
				
				data = $('#product_products2 .product_'+product_id+' .options input[type=\'text\'], #product_products2 .product_'+product_id+' .options input[type=\'hidden\'], #product_products2 .product_'+product_id+' .options input[type=\'radio\']:checked, #product_products2 .product_'+product_id+' .options input[type=\'checkbox\']:checked, #product_products2 .product_'+product_id+' .options select');
				$.ajax({
				  url: 'index.php?route=product/product/update_prices',
				  type: 'post',
				  dataType: 'json',
				  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
				  success: function(json) {
					{% if (recalc_price) %} 
					
						{% if (description_options['zamena_description'] and description_options['weight']) %} 
							var weight = json['weight'];
							{% if (revtheme_product_all['recalc_price_animate']) %} 
								var start_weight = parseFloat($('#product_products2 .pr_weight_'+product_id).attr('data-weight'));
								$({val:start_weight}).animate({val:weight}, {
									duration: 500,
									easing: 'swing',
									step: function(val) {
										$('#product_products2 .pr_weight_'+product_id).html(weight_format(val, product_id));
									}
								});
								$('#product_products2 .pr_weight_'+product_id).attr('data-weight', json['weight']);
							{% else %} 
								$('#product_products2 .pr_weight_'+product_id).html(weight_format(weight, product_id));
							{% endif %} 
						{% endif %} 

						{% if (stikers_status) %} 
							var price = json['price_n'];
							{% if (revtheme_product_all['recalc_price_animate']) %} 
								var start_price = parseFloat($('#product_products2 .special_no_format'+product_id).html().replace(/\s*/g,''));
								$({val:start_price}).animate({val:price}, {
									duration: 500,
									easing: 'swing',
									step: function(val) {
										$('#product_products2 .special_no_format'+product_id).html(price_format(val));
									}
								});
							{% else %} 
								$('#product_products2 .special_no_format'+product_id).html(price_format(price));
							{% endif %} 
						{% endif %} 
						
						
						var special = json['special_n'];
						{% if (revtheme_product_all['recalc_price_animate']) %} 
							var start_special = parseFloat($('#product_products2 .price_no_format'+product_id).html().replace(/\s*/g,''));
							$({val:start_special}).animate({val:special}, {
								duration: 500,
								easing: 'swing',
								step: function(val) {
									$('#product_products2 .price_no_format'+product_id).html(price_format(val));
								}
							});
						{% else %} 
							$('#product_products2 .price_no_format'+product_id).html(price_format(special));
						{% endif %} 
					{% endif %} 
				  }
				});
			}
			function update_prices_product_product_products2(product_id, minimumvalue) {
				input_val = $('#product_products2 .product_'+product_id+' .plus-minus').val();
				if (input_val > minimumvalue) {
					input_val = minimumvalue;
					$('#product_products2 .product_'+product_id+' .plus-minus').val(minimumvalue);
				}
				{% if (recalc_price) %} 
				quantity = parseInt(input_val);
				{% else %} 
				quantity = 1;
				{% endif %} 
				data = $('#product_products2 .product_'+product_id+' .options input[type=\'text\'], #product_products2 .product_'+product_id+' .options input[type=\'hidden\'], #product_products2 .product_'+product_id+' .options input[type=\'radio\']:checked, #product_products2 .product_'+product_id+' .options input[type=\'checkbox\']:checked, #product_products2 .product_'+product_id+' .options select');
				$.ajax({
				  type: 'post',
				  url:  'index.php?route=product/product/update_prices',
				  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
				  dataType: 'json',
				  success: function(json) {
				  
					{% if (img_slider) %} 
					$('#product_products2 .product_'+product_id+' .image .owl-item:first-child img').attr('src', json['opt_image']);
					{% else %} 
					$('#product_products2 .product_'+product_id+' .image img').attr('src', json['opt_image']);
					{% endif %} 
					
					{% if (description_options['zamena_description'] and description_options['model']) %} 
					$('#product_products2 .product_'+product_id+' .pr_model_'+product_id).html(json['opt_model']);
					{% endif %} 
				  
					var end_quantity = json['option_quantity'];
					{% if (revtheme_product_all['recalc_price_animate']) %} 
						var start_quantity = parseFloat($('#product_products2 .pr_quantity_'+product_id).html().replace(/\s*/g,''));
						$({val:start_quantity}).animate({val:end_quantity}, {
							duration: 500,
							easing: 'swing',
							step: function(val) {
								$('#product_products2 .pr_quantity_'+product_id).html(number_format(val, product_id));
							}
						});
					{% else %} 
						$('#product_products2 .pr_quantity_'+product_id).html(number_format(end_quantity, product_id));
					{% endif %} 
					
					{% if (description_options['zamena_description'] and description_options['weight']) %} 
						var weight = json['weight'];
						{% if (revtheme_product_all['recalc_price_animate']) %} 
							var start_weight = parseFloat($('#product_products2 .pr_weight_'+product_id).attr('data-weight'));
							$({val:start_weight}).animate({val:weight}, {
								duration: 500,
								easing: 'swing',
								step: function(val) {
									$('#product_products2 .pr_weight_'+product_id).html(weight_format(val, product_id));
								}
							});
							$('#product_products2 .pr_weight_'+product_id).attr('data-weight', json['weight']);
						{% else %} 
							$('#product_products2 .pr_weight_'+product_id).html(weight_format(weight, product_id));
						{% endif %} 
					{% endif %} 
				  
					{% if (stikers_status) %} 
						var price = json['price_n'];
						{% if (revtheme_product_all['recalc_price_animate']) %} 
							var start_price = parseFloat($('#product_products2 .special_no_format'+product_id).html().replace(/\s*/g,''));
							$({val:start_price}).animate({val:price}, {
								duration: 500,
								easing: 'swing',
								step: function(val) {
									$('#product_products2 .special_no_format'+product_id).html(price_format(val));
								}
							});
						{% else %} 
							$('#product_products2 .special_no_format'+product_id).html(price_format(price));
						{% endif %} 
					{% endif %} 
					
					var special = json['special_n'];
					{% if (revtheme_product_all['recalc_price_animate']) %} 
						var start_special = parseFloat($('#product_products2 .price_no_format'+product_id).html().replace(/\s*/g,''));
						$({val:start_special}).animate({val:special}, {
							duration: 500,
							easing: 'swing',
							step: function(val) {
								$('#product_products2 .price_no_format'+product_id).html(price_format(val));
							}
						});
					{% else %} 
						$('#product_products2 .price_no_format'+product_id).html(price_format(special));
					{% endif %} 

				  }
				});
			}
			var product_grid_width = $('.product-layout .product-thumb').outerWidth();
			if (product_grid_width < 240) {
				$('.product-layout').addClass('new_line');
			} else {
				$('.product-layout').removeClass('new_line');
			}
			max_height_div('#product_products2 .product-thumb h4');
			$('#product_products2 .product-thumb .description_options').css('min-height', 'initial');
			max_height_div('#product_products2 .product-thumb .description_options');
			max_height_div('#product_products2 .product-thumb .price');
			max_height_div('#product_products2 .product-thumb .number');
			max_height_div('#product_products2 .product-thumb .product_buttons');
			function max_height_div(div) {
				var maxheight = 0;
				$(div).each(function(){
					$(this).removeAttr('style');
					if($(this).height() > maxheight) {
						maxheight = $(this).height();
					}
				});
				$(div).height(maxheight);
			}
			//--></script>
		</div>
	{% endif %} 
      {% if (tags) %} 
      <p>{{ text_tags }} 
        {% set i = 0 %}{% for i in i..tags %} 
        {% if (i < (tags|length - 1)) %} 
        <a href="{{ tags[i]['href'] }}">{{ tags[i]['tag'] }}</a>,
        {% else %} 
        <a href="{{ tags[i]['href'] }}">{{ tags[i]['tag'] }}</a>
        {% endif %} 
        {% endfor %} 
      </p>
      {% endif %} 
      {{ content_bottom }}</div>

	{% if (products and recpr_rightc) %} 
	<aside id="column-right" class="col-sm-3 hidden-xs hidden-sm {% if (columns_dd) %} {{ 'columns_dd' }} {% endif %}">
	<div id="product_products">
	<h3>{{ text_related }}</h3>
	<div class="row">
	<div class="product_related products_category">
	{% for product in products %} 
	<div class="col-lg-12 item">
	  <div class="product-thumb product_{{ product['product_id'] }}">
		<div class="image">
			<a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive {% if (product['quantity'] < 1 and not zakaz) %}zatemnenie_img{% endif %}" /></a>
			{% if (stikers_status) %} 
				<div class="stiker_panel">
					{% if ((product['quantity'] > 0 and product['price_number'] != 0) or zakaz) %} 
						{% if (product['stiker_spec']) %} 
							{% if (product['special']) %} 
								<span class="stiker stiker_spec"><span class="price-old special_no_format{{ product['product_id'] }}">{{ product['price'] }}</span></span>
							{% else %} 
								<span class="hidden special_no_format{{ product['product_id'] }}"></span>
							{% endif %} 
						{% else %} 
							<span class="hidden special_no_format{{ product['product_id'] }}"></span>
						{% endif %} 
					{% else %} 
						<span class="special_no_format{{ product['product_id'] }}" style="display:none"></span>
					{% endif %} 
					{% if (product['stiker_best']) %} 
						<span class="stiker stiker_best">{{ text_catalog_stiker_best }}</span>
					{% endif %} 
					{% if (product['stiker_last']) %} 
						<span class="stiker stiker_last">{{ text_catalog_stiker_last }}</span>
					{% endif %} 
					{% if (product['stiker_sklad_status']) %} 
						<span class="stiker stiker_netu">{{ product['stiker_sklad_status'] }}</span>
					{% elseif (product['stiker_stock']) %} 
						{% if (product['price_number'] == 0 and not zakaz_price_null) %} 
							<span class="stiker stiker_netu">{{ text_catalog_stiker_netu_2 }}</span>
						{% elseif (product['quantity'] < 1 and product['price_number'] > 0 and not zakaz) %} 
							<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
						{% elseif (product['quantity'] < 1 and not zakaz and zakaz_price_null) %} 
							<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
						{% elseif (product['quantity'] < 1 and zakaz and not zakaz_price_null) %} 
							<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
						{% elseif (product['quantity'] < 1 and zakaz and zakaz_price_null) %} 
							<span class="stiker stiker_netu">{{ product['text_catalog_stiker_netu'] }}</span>
						{% endif %} 
					{% endif %} 
					{% if (product['stiker_upc']) %} 
						<span class="stiker stiker_user">{{ product['stiker_upc'] }}</span>
					{% endif %} 
					{% if (product['stiker_ean']) %} 
						<span class="stiker stiker_user">{{ product['stiker_ean'] }}</span>
					{% endif %} 
					{% if (product['stiker_jan']) %} 
						<span class="stiker stiker_user">{{ product['stiker_jan'] }}</span>
					{% endif %} 
					{% if (product['stiker_isbn']) %} 
						<span class="stiker stiker_user">{{ product['stiker_isbn'] }}</span>
					{% endif %} 
					{% if (product['stiker_mpn']) %} 
						<span class="stiker stiker_user">{{ product['stiker_mpn'] }}</span>
					{% endif %} 
				</div>
			{% endif %} 
			{% if (revpopuporder or popup_view) %} 
				<div class="fapanel">
					{% if (product['quantity'] > 0 or zakaz) %} 
						{% if (revpopuporder) %} 
							{% if (product['price_number'] > 0) %} 
								<div class="zakaz">
									<a onclick="get_revpopup_purchase('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="left" title="{{ text_catalog_revpopup_purchase }}" class='fa fa-border fa-gavel'></i></a>
								</div>
							{% endif %} 
						{% endif %} 
					{% endif %} 
					{% if (popup_view) %} 
						<div class="lupa">
							<a onclick="get_revpopup_view('{{ product['product_id'] }}');"><i data-toggle="tooltip" data-placement="left" title="{{ text_catalog_revpopup_view }}" class='fa fa-border fa-eye'></i></a>
						</div>
					{% endif %} 
				</div>
			{% endif %} 
		</div>
		<div class="caption clearfix">
			<h4><a href="{{ product['href'] }}">{{ product['name'] }}</a></h4>
			{% if (product['rating']) %} 
			<div class="rating">
			  {% set i = 1 %}{% for i in i..5 %} 
			  {% if (product['rating'] < i) %} 
			  <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-2x"></i></span>
			  {% else %} 
			  <span class="fa fa-stack"><i class="fa fa-star fa-stack-2x"></i><i class="fa fa-star-o fa-stack-2x"></i></span>
			  {% endif %} 
			  {% endfor %} 
			</div>
			{% endif %} 
			<div class="product_buttons">
				{% if (product['price']) %} 
					{% if (product['price_number'] > 0) %} 
						{% if (product['quantity'] > 0 or zakaz) %} 
							<div class="price">
							{% if (product['price_number'] > 0) %} 
								{% if (not product['special']) %} 
									{{ product['price'] }} 
								{% else %} 
									<span class="price-new">{{ product['special'] }}</span>
								{% endif %} 
							{% endif %} 
							</div>
						{% endif %} 
						{% else %} 
							{% if (zakaz) %} 
								<p class="price na_zakaz">{{ text_catalog_price_na_zakaz }}</p>
							{% endif %} 
					{% endif %} 
				{% endif %} 
				{% if (rev_srav_prod or rev_wish_prod) %} {% set button_cart_class = 'prlistb' %} {% else %} {% set button_cart_class = 'prlistb active' %} {% endif %} 
				{% if (product['quantity'] > 0 or zakaz) %} 
					{% if (product['price_number'] > 0) %} 
						<div class="cart">
							<a onclick="get_revpopup_cart('{{ product['product_id'] }}', 'catalog_mod', '{{ product['minimum'] }}');" {% if (button_cart_class != 'prlistb active') %}data-toggle="tooltip" title="{{ button_cart }}"{% endif %}><i class="fa fa-border fa-shopping-basket"><span class="{{ button_cart_class }}">{{ button_cart }}</span></i></a>
						</div>
					{% endif %} 
				{% endif %} 
				{% if (rev_wish_prod) %} 
					<div class="wishlist">
						<a class="{{ product['wishlist_class'] }}" data-toggle="tooltip" onclick="wishlist.add('{{ product['product_id'] }}');" title="{{ product['button_wishlist'] }}"><i class="fa fa-border fa-heart"></i></a>
					</div>
				{% endif %} 
				{% if (rev_srav_prod) %} 
					<div class="compare">
						<a class="{{ product['compare_class'] }}" data-toggle="tooltip" onclick="compare.add('{{ product['product_id'] }}', '{{ product['brand'] }}');" title="{{ product['button_compare'] }}"><i class="fa fa-border fa-bar-chart-o"></i></a>
					</div>
				{% endif %} 
			</div>
		</div>
	  </div>
	</div>
	{% endfor %} 
	</div>
	</div>
	</div>
	</aside>
	{% endif %} 

    {{ column_right }}</div>
</div>
<script><!--
{% if (text_blocks) %} 
	var div_mh_text_blocks = '.p_text_blocks';
	var maxheight = 0;$(div_mh_text_blocks).each(function(){$(this).removeAttr('style');if($(this).height() > maxheight) {maxheight = $(this).height();{{ '}}' }});$(div_mh_text_blocks).height(maxheight);
{% endif %} 
{% if (text_blocks_all) %} 
	var div_mh_text_blocks_all = '.p_text_blocks_all';
	var maxheight = 0;$(div_mh_text_blocks_all).each(function(){$(this).removeAttr('style');if($(this).height() > maxheight) {maxheight = $(this).height();{{ '}}' }});$(div_mh_text_blocks_all).height(maxheight);
{% endif %} 
$(document).ready(function(){
	$('.nav.nav-tabs li:first-child a').tab('show');
});
var owl = $("#owl-images");
owl.owlCarousel({
  responsiveBaseWidth: '.container',
  itemsCustom: [[0, 2], [448, 3], [650, 3], [750, 3], [970, 4]],
  navigation : true,
  navigationText: ['<i class="fa fa-chevron-left fa-5x"></i>', '<i class="fa fa-chevron-right fa-5x"></i>'],
  pagination: false
}); 

$('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){
	$.ajax({
		url: 'index.php?route=product/product/getRecurringDescription',
		type: 'post',
		data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
		dataType: 'json',
		beforeSend: function() {
			$('#recurring-description').html('');
		},
		success: function(json) {
			$('.alert, .text-danger').remove();

			if (json['success']) {
				$('#recurring-description').html(json['success']);
			}
		}
	});
});

$('.date').datetimepicker({
	pickTime: false
});

$('.datetime').datetimepicker({
	pickDate: true,
	pickTime: true
});

$('.time').datetimepicker({
	pickDate: false
});

$('button[id^=\'button-upload\']').on('click', function() {
	var node = this;

	$('#form-upload').remove();

	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

	$('#form-upload input[name=\'file\']').trigger('click');

	if (typeof timer != 'undefined') {
    	clearInterval(timer);
	}

	timer = setInterval(function() {
		if ($('#form-upload input[name=\'file\']').val() != '') {
			clearInterval(timer);

			$.ajax({
				url: 'index.php?route=tool/upload',
				type: 'post',
				dataType: 'json',
				data: new FormData($('#form-upload')[0]),
				cache: false,
				contentType: false,
				processData: false,
				beforeSend: function() {
					$(node).button('loading');
				},
				complete: function() {
					$(node).button('reset');
				},
				success: function(json) {
					$('.text-danger').remove();

					if (json['error']) {
						$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
					}

					if (json['success']) {
						alert(json['success']);

						$(node).parent().find('input').attr('value', json['code']);
					}
				},
				error: function(xhr, ajaxOptions, thrownError) {
					alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
				}
			});
		}
	}, 500);
});

$('#review').delegate('.pagination a', 'click', function(e) {
    e.preventDefault();

    $('#review').fadeOut('slow');

    $('#review').load(this.href);

    $('#review').fadeIn('slow');
});

$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

$('#button-review').on('click', function() {
	$.ajax({
		url: 'index.php?route=product/product/write&product_id={{ product_id }}',
		type: 'post',
		dataType: 'json',
		data: $(".form-review").serialize(),
		beforeSend: function() {
			$('#button-review').button('loading');
		},
		complete: function() {
			$('#button-review').button('reset');
		},
		success: function(json) {
			$('.alert-success, .alert-danger').remove();

			if (json['error']) {
				get_revpopup_notification('alert-danger', '{{ text_product_oshibka }}', json['error']);
			}

			if (json['success']) {
				get_revpopup_notification('alert-success', '{{ text_product_spasibo_otz }}', json['success']);

				$('input[name=\'name\']').val('');
				$('textarea[name=\'text\']').val('');
				$('input[name=\'rating\']:checked').prop('checked', false);
				
				$('#post-review-box').slideUp(300);
				$('#new-review').focus();
				$('#open-review-box').fadeIn(100);
				$('#close-review-box').hide();
				$('#ratings-hidden').val('');
				$('.stars .glyphicon').removeClass('glyphicon-star').addClass('glyphicon-star-empty');
				
			}
		}
	});
});

$('#button-answers').on('click', function() {
	$.ajax({
		url: 'index.php?route=revolution/revstorereview/writeanswer&product_id={{ product_id }}',
		type: 'post',
		dataType: 'json',
		data: $(".form-answers").serialize(),
		beforeSend: function() {
			$('#button-answers').button('loading');
		},
		complete: function() {
			$('#button-answers').button('reset');
		},
		success: function(json) {
			$('.alert-success, .alert-danger').remove();
			if (json['error']) {
				get_revpopup_notification('alert-danger', '{{ text_product_oshibka }}', json['error']);
			}
			if (json['success']) {
				get_revpopup_notification('alert-success', '{{ text_product_spasibo_answer }}', json['success']);
				$('input[name=\'name_answer\']').val('');
				$('textarea[name=\'text_answer\']').val('');
				$('#post-answers-box').slideUp(300);
				$('#new-answers').focus();
				$('#open-answers-box').fadeIn(100);
				$('#close-answers-box').hide();
			}
		}
	});
});

$('.thumbnails .main-image').magnificPopup({
	type:'image',
	removalDelay: 170,
	callbacks: {
	beforeOpen: function() {
	   this.st.mainClass = 'mfp-zoom-in';
	},
	open: function() {
		$('body').addClass('razmiv2');
		$('#pagefader2').fadeIn(70);
		if (document.body.scrollHeight > document.body.offsetHeight) {
			{% if (setting_all_settings['all_document_width']) %} 
				$('#top3').css('right', '8.5px');
			{% endif %} 
		}
	}, 
	close: function() {
		$('body').removeClass('razmiv2');
		$('#pagefader2').fadeOut(70);
		$('#top3').css('right', 'initial');
	}
	}
});
$('.thumbnails .images-additional').magnificPopup({
	type:'image',
	delegate: 'a',
	gallery: {
		enabled:true
	},
	removalDelay: 170,
	callbacks: {
	beforeOpen: function() {
	   this.st.mainClass = 'mfp-zoom-in';
	},
	open: function() {
		$('body').addClass('razmiv2');
		$('#pagefader2').fadeIn(70);
		if (document.body.scrollHeight > document.body.offsetHeight) {
			{% if (setting_all_settings['all_document_width']) %} 
				$('#top3').css('right', '8.5px');
			{% endif %} 
		}
	}, 
	close: function() {
		$('body').removeClass('razmiv2');
		$('#pagefader2').fadeOut(70);
		$('#top3').css('right', 'initial');
	}
	}
});
{% if (zoom) %} 
	if ($(window).width() > 991) {
		$('#imageWrap > a').addClass('cloud-zoom');
	
		$('.images-additional img').click(function(){
			var oldsrc = $(this).attr('src');
			newsrc = $(this).parent().attr('id');
			newhref = $(this).parent().attr('href');
			number = $(this).attr('data-number');
			
			$('#imageWrap img').attr('src', newsrc);
			
			$('.main-image img').attr('src', newsrc);
			$('.main-image').attr('href', newhref);
			$('.main-image').attr('data-number', number);
			$('.cloud-zoom').CloudZoom();
			return false;
		});
		$('#imageWrap.image').bind('click',function(){
			if ($('.images-additional').length > 0) {
				var startnumber = $('.cloud-zoom.main-image').attr('data-number');
				$('.images-additional').magnificPopup('open', startnumber);
				return false
			} else {
				$('.cloud-zoom.main-image').magnificPopup('open');
				return false
			}
		});
		$('.cloud-zoom').attr('rel','position:\'inside\'').CloudZoom();
	} else {
		$('.thumbnails .main-image img').click(function(){
			if ($('.images-additional').length > 0) {
				var startnumber = $(this).parent().attr('data-number');
				$('.images-additional').magnificPopup('open', startnumber);
				return false
			} else {
				$('.main-image').magnificPopup('open');
				return false
			}
		});
	}
{% else %} 
	$('.thumbnails .main-image img').click(function(){
		if ($('.images-additional').length > 0) {
			var startnumber = $(this).parent().attr('data-number');
			$('.images-additional').magnificPopup('open', startnumber);
			return false
		} else {
			$('.main-image').magnificPopup('open');
			return false
		}
	});
{% endif %} 
{% if (minimum > 1 and recalc_price) %} 
	update_quantity({{ product_id }},{{ minimum }});
{% endif %} 
function get_revpopup_cart_quantity() {
	input_val = $('.product-info.product_informationss .plus-minus').val();
	quantity  = parseInt(input_val);
	return quantity;
}
function validate_pole(val, product_id, znak, minimumvalue, maximumvalue) {
	val.value = val.value.replace(/[^\d,]/g, '');
	if (val.value == '') val.value = minimumvalue;
	maximumvalue = Number($('.product_informationss .pr_quantity').text());
	if (maximumvalue < 1) maximumvalue = 9999;
	input_val = $('.product-info.product_informationss .plus-minus');
	quantity = parseInt(input_val.val());
	{% if (q_zavisimost) %} 
	if(znak=='+' && input_val.val() < maximumvalue) input_val.val(quantity+1);
	else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
	else if(znak=='=' && input_val.val() < maximumvalue && input_val.val() < maximumvalue) input_val.val(input_val.val());
	if (quantity < 1 || quantity < minimumvalue) {
		input_val.val(minimumvalue);
		val.value = minimumvalue;
	} else if (quantity > maximumvalue) {
		input_val.val(maximumvalue);
		val.value = maximumvalue;
	}
	{% else %} 
	if(znak=='+') input_val.val(quantity+1);
	else if(znak=='-' && input_val.val() > minimumvalue) input_val.val(quantity-1);
	else if(znak=='=' && input_val.val() > minimumvalue) input_val.val(input_val.val());
	if (quantity < 1 || quantity < minimumvalue) {
		input_val.val(minimumvalue);
		val.value = minimumvalue;
	}
	{% endif %} 

	update_quantity(product_id, input_val.val());
}
function update_quantity(product_id, quantity) {
	var minimumvalue = {{ minimum }};
	if (quantity == 0 || quantity < minimumvalue) {
		quantity = $('.product-info.product_informationss .plus-minus').val(minimumvalue);
		return;
	} else if (quantity < 1) {
		quantity = 1;
		return;
	}
	
	data = $('.product-info.product_informationss input[type=\'text\'], .product-info.product_informationss input[type=\'hidden\'], .product-info.product_informationss input[type=\'radio\']:checked, .product-info.product_informationss input[type=\'checkbox\']:checked, .product-info.product_informationss select, .product-info.product_informationss textarea'),
	$.ajax({
	  url: 'index.php?route=product/product/update_prices',
	  type: 'post',
	  dataType: 'json',
	  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
	  success: function(json) {

		{% if (recalc_price) %} 
		
			{% if (points) %} 
				var end_quantity = json['points'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_quantity = parseFloat($('.product_informationss .pr_points').html().replace(/\s*/g,''));
					$({val:start_quantity}).animate({val:end_quantity}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .pr_points').html(number_format(val, product_id));
						}
					});
				{% else %} 
					$('.product_informationss .pr_points').html(number_format(end_quantity, product_id));
				{% endif %} 
			{% endif %} 
		
			{% if (weight_status) %} 
				var weight = json['weight'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_weight = parseFloat($('.product_informationss .pr_weight').attr('data-weight'));
					$({val:start_weight}).animate({val:weight}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .pr_weight').html(weight_format(val));
						}
					});
					$('.product_informationss .pr_weight').attr('data-weight', json['weight']);
				{% else %} 
					$('.product_informationss .pr_weight').html(weight_format(weight));
				{% endif %} 
			{% endif %} 
		  
			{% if (price_number > 0 or zakaz_price_null) %} 
				{% if (discounts and not special) %} 
					var price = json['special_n'];
				{% else %} 
					var price = json['price_n'];
				{% endif %} 
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_price = parseFloat($('.product_informationss .update_price').html().replace(/\s*/g,''));
					$({val:start_price}).animate({val:price}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .update_price').html(price_format(val));
						}
					});
				{% else %} 
					$('.product_informationss .update_price').html(price_format(price));
				{% endif %} 
				
				var special = json['special_n'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_special = parseFloat($('.product_informationss .update_special').html().replace(/\s*/g,''));
					$({val:start_special}).animate({val:special}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .update_special').html(price_format(val));
						}
					});
				{% else %} 
					$('.product_informationss .update_special').html(price_format(special));
				{% endif %} 
			{% endif %} 
		
		{% endif %} 
	  } 
	});
}
function update_prices_product(product_id, minimumvalue) {
	input_val = $('.product-info.product_informationss .plus-minus').val();
	if (input_val > minimumvalue) {
		input_val = minimumvalue;
		$('.product-info.product_informationss .plus-minus').val(minimumvalue);
	}
	{% if (recalc_price) %} 
	quantity = parseInt(input_val);
	{% else %} 
	quantity = 1;
	{% endif %} 
	data = $('.product-info.product_informationss input[type=\'text\'], .product-info.product_informationss input[type=\'hidden\'], .product-info.product_informationss input[type=\'radio\']:checked, .product-info.product_informationss input[type=\'checkbox\']:checked, .product-info.product_informationss select, .product-info.product_informationss textarea');
	$.ajax({
	  type: 'post',
	  url:  'index.php?route=product/product/update_prices',
	  data: data.serialize() + '&product_id=' + product_id + '&quantity=' + quantity,
	  dataType: 'json',
	  success: function(json) {

		$('.product_informationss .thumbnails a.main-image').attr('href', json['opt_image_2_big']);
		$('.product_informationss .thumbnails a.main-image img').attr('src', json['opt_image_2']);
		{% if (images_slider) %} 
		$('.product_informationss .thumbnails .images-additional .owl-item:first-child a').attr('href', json['opt_image_2_big']);
		$('.product_informationss .thumbnails .images-additional .owl-item:first-child a img').attr('src', json['opt_image_2']).css('width', {{ config_image_additional_width }}).css('height', {{ config_image_additional_height }});
		{% else %} 
		$('.product_informationss .thumbnails .images-additional a:first-child').attr('href', json['opt_image_2_big']);
		$('.product_informationss .thumbnails .images-additional a:first-child img').attr('src', json['opt_image_2']).css('width', {{ config_image_additional_width }}).css('height', {{ config_image_additional_height }});
		{% endif %} 
		{% if (zoom) %} 
		{% if (images_slider) %} 
		$('.product_informationss .thumbnails .images-additional .owl-item:first-child a').attr('id', json['opt_image_2']);
		{% else %} 
		$('.product_informationss .thumbnails .images-additional a:first-child').attr('id', json['opt_image_2']);
		{% endif %} 
		$('.product_informationss .cloud-zoom').CloudZoom();
		{% endif %} 
		
		var end_quantity = json['option_quantity'];
		{% if (revtheme_product_all['recalc_price_animate']) %} 
			var start_quantity = parseFloat($('.product_informationss .pr_quantity').html().replace(/\s*/g,''));
			$({val:start_quantity}).animate({val:end_quantity}, {
				duration: 500,
				easing: 'swing',
				step: function(val) {
					$('.product_informationss .pr_quantity').html(number_format(val, product_id));
				}
			});
		{% else %} 
			$('.product_informationss .pr_quantity').html(number_format(end_quantity, product_id));
		{% endif %} 
		
		{% if (points) %} 
			var end_quantity = json['points'];
			{% if (revtheme_product_all['recalc_price_animate']) %} 
				var start_quantity = parseFloat($('.product_informationss .pr_points').html().replace(/\s*/g,''));
				$({val:start_quantity}).animate({val:end_quantity}, {
					duration: 500,
					easing: 'swing',
					step: function(val) {
						$('.product_informationss .pr_points').html(number_format(val, product_id));
					}
				});
			{% else %} 
				$('.product_informationss .pr_points').html(number_format(end_quantity, product_id));
			{% endif %} 
		{% endif %} 
		
		{% if (model_status) %} 
			$('.product_informationss .pr_model').html(json['opt_model']);
		{% endif %} 
			
		{% if (weight_status) %} 
			var weight = json['weight'];
			{% if (revtheme_product_all['recalc_price_animate']) %} 
				var start_weight = parseFloat($('.product_informationss .pr_weight').attr('data-weight'));
				$({val:start_weight}).animate({val:weight}, {
					duration: 500,
					easing: 'swing',
					step: function(val) {
						$('.product_informationss .pr_weight').html(weight_format(val));
					}
				});
				$('.product_informationss .pr_weight').attr('data-weight', json['weight']);
			{% else %} 
				$('.product_informationss .pr_weight').html(weight_format(weight));
			{% endif %} 
		{% endif %} 
	  
		{% if ((options and not revtheme_product_all['options_buy']) or not options_buy) %} 
			{% if (price_number > 0 or zakaz_price_null) %} 
				{% if (discounts and not special) %} 
					var price = json['special_n'];
				{% else %} 
					var price = json['price_n'];
				{% endif %} 
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_price = parseFloat($('.product_informationss .update_price').html().replace(/\s*/g,''));
					$({val:start_price}).animate({val:price}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .update_price').html(price_format(val));
						}
					});
				{% else %} 
					$('.product_informationss .update_price').html(price_format(price));
				{% endif %} 
				
				var special = json['special_n'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_special = parseFloat($('.product_informationss .update_special').html().replace(/\s*/g,''));
					$({val:start_special}).animate({val:special}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .update_special').html(price_format(val));
						}
					});
				{% else %} 
					$('.product_informationss .update_special').html(price_format(special));
				{% endif %} 
			{% endif %} 
		{% endif %} 
	  }
	});
}
{% if (revtheme_product_all['options_buy_click']) %} 
	function update_options_buy(product_id, opt_id, option) {
		$('.product-info.product_informationss .options_buy .pro_'+option+' input[name=\'option['+opt_id+']\']').val(option);
		data = $('.product-info.product_informationss .options_buy .pro_'+option+' input[type=\'text\'], .product-info.product_informationss .options_buy .pro_'+option+' input[type=\'hidden\'], .product-info.product_informationss .options_buy .pro_'+option+' input[type=\'radio\']:checked, .product-info.product_informationss .options_buy .pro_'+option+' input[type=\'checkbox\']:checked, .product-info.product_informationss .options_buy .pro_'+option+' select, .product-info.product_informationss .options_buy .pro_'+option+' textarea');
		$.ajax({
		  type: 'post',
		  url:  'index.php?route=product/product/update_prices',
		  data: data.serialize() + '&product_id=' + product_id,
		  dataType: 'json',
		  success: function(json) {
			
			$('.product_informationss .thumbnails a.main-image').attr('href', json['opt_image_2_big']);
			$('.product_informationss .thumbnails a.main-image img').attr('src', json['opt_image_2']);
			{% if (images_slider) %} 
			$('.product_informationss .thumbnails .images-additional .owl-item:first-child a').attr('href', json['opt_image_2_big']);
			$('.product_informationss .thumbnails .images-additional .owl-item:first-child a img').attr('src', json['opt_image_2']).css('width', {{ config_image_additional_width }}).css('height', {{ config_image_additional_height }});
			{% else %} 
			$('.product_informationss .thumbnails .images-additional a:first-child').attr('href', json['opt_image_2_big']);
			$('.product_informationss .thumbnails .images-additional a:first-child img').attr('src', json['opt_image_2']).css('width', {{ config_image_additional_width }}).css('height', {{ config_image_additional_height }});
			{% endif %} 
			{% if (zoom) %} 
			{% if (images_slider) %} 
			$('.product_informationss .thumbnails .images-additional .owl-item:first-child a').attr('id', json['opt_image_2']);
			{% else %} 
			$('.product_informationss .thumbnails .images-additional a:first-child').attr('id', json['opt_image_2']);
			{% endif %} 
			$('.product_informationss .cloud-zoom').CloudZoom();
			{% endif %} 
			  
			var end_quantity = json['option_quantity'];
			{% if (revtheme_product_all['recalc_price_animate']) %} 
				var start_quantity = parseFloat($('.product_informationss .pr_quantity').html().replace(/\s*/g,''));
				$({val:start_quantity}).animate({val:end_quantity}, {
					duration: 500,
					easing: 'swing',
					step: function(val) {
						$('.product_informationss .pr_quantity').html(number_format(val, product_id));
					}
				});
			{% else %} 
				$('.product_informationss .pr_quantity').html(number_format(end_quantity, product_id));
			{% endif %} 
			
			{% if (points) %} 
				var end_quantity = json['points'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_quantity = parseFloat($('.product_informationss .pr_points').html().replace(/\s*/g,''));
					$({val:start_quantity}).animate({val:end_quantity}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .pr_points').html(number_format(val, product_id));
						}
					});
				{% else %} 
					$('.product_informationss .pr_points').html(number_format(end_quantity, product_id));
				{% endif %} 
			{% endif %} 
			
			{% if (model_status) %} 
				$('.product_informationss .pr_model').html(json['opt_model']);
			{% endif %} 
			
			{% if (weight_status) %} 
				var weight = json['weight'];
				{% if (revtheme_product_all['recalc_price_animate']) %} 
					var start_weight = parseFloat($('.product_informationss .pr_weight').attr('data-weight'));
					$({val:start_weight}).animate({val:weight}, {
						duration: 500,
						easing: 'swing',
						step: function(val) {
							$('.product_informationss .pr_weight').html(weight_format(val));
						}
					});
					$('.product_informationss .pr_weight').attr('data-weight', json['weight']);
				{% else %} 
					$('.product_informationss .pr_weight').html(weight_format(weight));
				{% endif %} 
			{% endif %} 
		  }
		});
	}
{% endif %} 
function price_format(n) {
	c = {{ currency['decimals'] is empty ? "0" : currency['decimals'] }};
    d = '{{ currency['decimal_point'] }}';
    t = '{{ currency['thousand_point'] }}';
    s_left = '{{ currency['symbol_left'] }}';
    s_right = '{{ currency['symbol_right'] }}';
    n = n * {{ currency['value'] }};
    i = parseInt(n = Math.abs(n).toFixed(c)) + ''; 
    j = ((j = i.length) > 3) ? j % 3 : 0; 
    return s_left + (j ? i.substr(0, j) + t : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '') + s_right; 
}
function weight_format(n, product_id) {
    c = 2;
    d = '.';
    t = ',';
    i = parseInt(n = Math.abs(n).toFixed(c)) + ''; 
    j = ((j = i.length) > 3) ? j % 3 : 0; 
    return (j ? i.substr(0, j) + t : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');
}
function number_format(n, product_id) {
    i = parseInt(n = Math.abs(n).toFixed(0)) + ''; 
    return i;
}
{% if (img_slider) %} 
	$('.product_related .owlproduct').owlCarousel({
		items: 1,
		singleItem: true,
		mouseDrag: false,
		touchDrag: false,
		autoPlay: false,
		navigation: true,
		navigationText: ['<i class="fa fa-chevron-left fa-3x"></i>', '<i class="fa fa-chevron-right fa-3x"></i>'],
		pagination: false
	});
	$('.viewed_products .owlproduct').owlCarousel({
		items: 1,
		singleItem: true,
		mouseDrag: false,
		touchDrag: false,
		autoPlay: false,
		navigation: true,
		navigationText: ['<i class="fa fa-chevron-left fa-3x"></i>', '<i class="fa fa-chevron-right fa-3x"></i>'],
		pagination: false
	});
{% else %} 
	$('.owl-carousel.owlproduct').remove();
{% endif %} 
--></script>
{{ footer }}